<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">D.DSub.stamping.ast_stamping</h1>

<div class="code">
</div>

<div class="doc">
Define "stamping" (what we used to call translation) in a purely syntactic
    way, without involving Iris. 
</div>
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">stdpp</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.gmap.html#"><span class="id" title="library">gmap</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">D</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="D.tactics.html#"><span class="id" title="library">tactics</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">D.DSub</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="D.DSub.syn.syn.html#"><span class="id" title="library">syn</span></a> <a class="idref" href="D.DSub.syn.syn_lemmas.html#"><span class="id" title="library">syn_lemmas</span></a> <a class="idref" href="D.DSub.stamping.type_extraction_syn.html#"><span class="id" title="library">type_extraction_syn</span></a> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#"><span class="id" title="library">core_stamping_defs</span></a>.<br/>

<br/>
<span class="id" title="keyword">Set Implicit Arguments</span>.<br/>

<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">T</span>: <a class="idref" href="D.DSub.syn.syn.html#VlSorts.ty"><span class="id" title="inductive">ty</span></a>) (<span class="id" title="var">v</span>: <a class="idref" href="D.DSub.syn.syn.html#VlSorts.vl"><span class="id" title="definition">vl</span></a>) (<span class="id" title="var">e</span>: <a class="idref" href="D.DSub.syn.syn.html#VlSorts.tm"><span class="id" title="inductive">tm</span></a>) (<span class="id" title="var">Γ</span> : <a class="idref" href="D.DSub.syn.syn.html#VlSorts.ctx"><span class="id" title="definition">ctx</span></a>) (<span class="id" title="var">g</span>: <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#stys"><span class="id" title="abbreviation">stys</span></a>) (<span class="id" title="var">n</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="is_stamped_tm_skip"><span class="id" title="lemma">is_stamped_tm_skip</span></a> <span class="id" title="var">i</span> <span class="id" title="var">T</span> <span class="id" title="var">g</span> <span class="id" title="var">n</span> <span class="id" title="var">e</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_stamped_tm"><span class="id" title="abbreviation">is_stamped_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_stamped_tm"><span class="id" title="abbreviation">is_stamped_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> (<a class="idref" href="'https://www.ps.uni-saarland.de/autosubst/doc/'/Autosubst.Autosubst_Basics.html#iterate"><span class="id" title="definition">iterate</span></a> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.tskip"><span class="id" title="constructor">tskip</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e"><span class="id" title="variable">e</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">elim</span>: <span class="id" title="var">n</span> <span class="id" title="var">e</span> ⇒ [//|<span class="id" title="var">n</span> <span class="id" title="var">IHn</span>] <span class="id" title="var">e</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">exact</span>: <span class="id" title="var">IHn</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Here we do not unstamp types from the map, and we can't: unstamping the map
    recursively might not be terminate. We need an unstamped map, which is
    what's produced in the first pass.
    However, this problem disappears because paths are just source variables, not values.
 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="unstamp_vstamp"><span class="id" title="definition">unstamp_vstamp</span></a> <span class="id" title="var">g</span> <span class="id" title="var">vs</span> <span class="id" title="var">s</span> := <a class="idref" href="'https://www.ps.uni-saarland.de/autosubst/doc/'/Autosubst.Autosubst_Classes.html#23c9824843d8074d89ce0ae22df540a6"><span class="id" title="notation">(</span></a><a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.option.html#from_option"><span class="id" title="definition">from_option</span></a> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.vty"><span class="id" title="constructor">vty</span></a> (<a class="idref" href="D.DSub.syn.syn.html#VlSorts.vstamp"><span class="id" title="constructor">vstamp</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#s"><span class="id" title="variable">s</span></a>) (<a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#s"><span class="id" title="variable">s</span></a>)<a class="idref" href="'https://www.ps.uni-saarland.de/autosubst/doc/'/Autosubst.Autosubst_Classes.html#23c9824843d8074d89ce0ae22df540a6"><span class="id" title="notation">).[</span></a><a class="idref" href="D.asubst_intf.html#fb8e988ecab04d1ae39c9a75787321aa"><span class="id" title="notation">∞</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#vs"><span class="id" title="variable">vs</span></a><a class="idref" href="'https://www.ps.uni-saarland.de/autosubst/doc/'/Autosubst.Autosubst_Classes.html#23c9824843d8074d89ce0ae22df540a6"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_vstamp"><span class="id" title="definition">unstamp_vstamp</span></a> /.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="unstamp_tm"><span class="id" title="definition">unstamp_tm</span></a> <span class="id" title="var">g</span> (<span class="id" title="var">t</span>: <a class="idref" href="D.DSub.syn.syn.html#VlSorts.tm"><span class="id" title="inductive">tm</span></a>): <a class="idref" href="D.DSub.syn.syn.html#VlSorts.tm"><span class="id" title="inductive">tm</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.tv"><span class="id" title="constructor">tv</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="D.DSub.syn.syn.html#VlSorts.tv"><span class="id" title="constructor">tv</span></a> (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_vl"><span class="id" title="definition">unstamp_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.tapp"><span class="id" title="constructor">tapp</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span> ⇒ <a class="idref" href="D.DSub.syn.syn.html#VlSorts.tapp"><span class="id" title="constructor">tapp</span></a> (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_tm"><span class="id" title="definition">unstamp_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <span class="id" title="var">t1</span>) (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_tm"><span class="id" title="definition">unstamp_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <span class="id" title="var">t2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.tskip"><span class="id" title="constructor">tskip</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="D.DSub.syn.syn.html#VlSorts.tskip"><span class="id" title="constructor">tskip</span></a> (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_tm"><span class="id" title="definition">unstamp_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<span class="id" title="keyword">with</span><br/>
<a name="unstamp_vl"><span class="id" title="definition">unstamp_vl</span></a> <span class="id" title="var">g</span> (<span class="id" title="var">v</span>: <a class="idref" href="D.DSub.syn.syn.html#VlSorts.vl"><span class="id" title="definition">vl</span></a>): <a class="idref" href="D.DSub.syn.syn.html#VlSorts.vl"><span class="id" title="definition">vl</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.vstamp"><span class="id" title="constructor">vstamp</span></a> <span class="id" title="var">vs</span> <span class="id" title="var">s</span> ⇒ <a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_vstamp"><span class="id" title="definition">unstamp_vstamp</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <span class="id" title="var">vs</span> <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.vabs"><span class="id" title="constructor">vabs</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="D.DSub.syn.syn.html#VlSorts.vabs"><span class="id" title="constructor">vabs</span></a> (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_tm"><span class="id" title="definition">unstamp_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.vty"><span class="id" title="constructor">vty</span></a> <span class="id" title="var">T</span> ⇒ <a class="idref" href="D.DSub.syn.syn.html#VlSorts.vty"><span class="id" title="constructor">vty</span></a> (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_ty"><span class="id" title="definition">unstamp_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <span class="id" title="var">T</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.vint"><span class="id" title="constructor">vint</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="D.DSub.stamping.ast_stamping.html#v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.var_vl"><span class="id" title="constructor">var_vl</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="D.DSub.stamping.ast_stamping.html#v"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<span class="id" title="keyword">with</span><br/>
<a name="unstamp_ty"><span class="id" title="definition">unstamp_ty</span></a> <span class="id" title="var">g</span> (<span class="id" title="var">T</span>: <a class="idref" href="D.DSub.syn.syn.html#VlSorts.ty"><span class="id" title="inductive">ty</span></a>): <a class="idref" href="D.DSub.syn.syn.html#VlSorts.ty"><span class="id" title="inductive">ty</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.TTop"><span class="id" title="constructor">TTop</span></a> ⇒ <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.TBot"><span class="id" title="constructor">TBot</span></a> ⇒ <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;|&nbsp;TAnd&nbsp;T1&nbsp;T2&nbsp;=&gt;&nbsp;TAnd&nbsp;(unstamp_ty&nbsp;g&nbsp;T1)&nbsp;(unstamp_ty&nbsp;g&nbsp;T2)&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;|&nbsp;TOr&nbsp;T1&nbsp;T2&nbsp;=&gt;&nbsp;TOr&nbsp;(unstamp_ty&nbsp;g&nbsp;T1)&nbsp;(unstamp_ty&nbsp;g&nbsp;T2)&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.TLater"><span class="id" title="constructor">TLater</span></a> <span class="id" title="var">T</span> ⇒ <a class="idref" href="D.DSub.syn.syn.html#VlSorts.TLater"><span class="id" title="constructor">TLater</span></a> (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_ty"><span class="id" title="definition">unstamp_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.TAll"><span class="id" title="constructor">TAll</span></a> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span> ⇒ <a class="idref" href="D.DSub.syn.syn.html#VlSorts.TAll"><span class="id" title="constructor">TAll</span></a> (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_ty"><span class="id" title="definition">unstamp_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <span class="id" title="var">T1</span>) (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_ty"><span class="id" title="definition">unstamp_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <span class="id" title="var">T2</span>)<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;|&nbsp;TMu&nbsp;T&nbsp;=&gt;&nbsp;TMu&nbsp;(unstamp_ty&nbsp;g&nbsp;T)&nbsp;*)</span><br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.TTMem"><span class="id" title="constructor">TTMem</span></a> <span class="id" title="var">T1</span> <span class="id" title="var">T2</span> ⇒ <a class="idref" href="D.DSub.syn.syn.html#VlSorts.TTMem"><span class="id" title="constructor">TTMem</span></a> (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_ty"><span class="id" title="definition">unstamp_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <span class="id" title="var">T1</span>) (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_ty"><span class="id" title="definition">unstamp_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <span class="id" title="var">T2</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.TSel"><span class="id" title="constructor">TSel</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="D.DSub.syn.syn.html#VlSorts.TSel"><span class="id" title="constructor">TSel</span></a> (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_vl"><span class="id" title="definition">unstamp_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="D.DSub.syn.syn.html#VlSorts.TInt"><span class="id" title="constructor">TInt</span></a> ⇒ <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
XXX this formulation might be inconvenient: storing the correct n in the map might be preferable. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a name="is_stamped_gmap"><span class="id" title="definition">is_stamped_gmap</span></a> <span class="id" title="var">g</span>: <span class="id" title="keyword">Prop</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">s</span> <span class="id" title="var">T</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_stamped_ty"><span class="id" title="abbreviation">is_stamped_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="stamps_tm"><span class="id" title="abbreviation">stamps_tm</span></a> <span class="id" title="var">n</span> <span class="id" title="var">e__u</span> <span class="id" title="var">g</span> <span class="id" title="var">e__s</span> := (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_tm"><span class="id" title="definition">unstamp_tm</span></a> <span class="id" title="var">g</span> <span class="id" title="var">e__s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">e__u</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_unstamped_tm"><span class="id" title="abbreviation">is_unstamped_tm</span></a> <span class="id" title="var">e__u</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_stamped_tm"><span class="id" title="abbreviation">is_stamped_tm</span></a> <span class="id" title="var">n</span> <span class="id" title="var">g</span> <span class="id" title="var">e__s</span>).<br/>
<span class="id" title="keyword">Notation</span> <a name="stamps_vl"><span class="id" title="abbreviation">stamps_vl</span></a> <span class="id" title="var">n</span> <span class="id" title="var">v__u</span> <span class="id" title="var">g</span> <span class="id" title="var">v__s</span> := (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_vl"><span class="id" title="definition">unstamp_vl</span></a> <span class="id" title="var">g</span> <span class="id" title="var">v__s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">v__u</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_unstamped_vl"><span class="id" title="abbreviation">is_unstamped_vl</span></a> <span class="id" title="var">v__u</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_stamped_vl"><span class="id" title="abbreviation">is_stamped_vl</span></a> <span class="id" title="var">n</span> <span class="id" title="var">g</span> <span class="id" title="var">v__s</span>).<br/>
<span class="id" title="keyword">Notation</span> <a name="stamps_ty"><span class="id" title="abbreviation">stamps_ty</span></a> <span class="id" title="var">n</span> <span class="id" title="var">T__u</span> <span class="id" title="var">g</span> <span class="id" title="var">T__s</span> := (<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_ty"><span class="id" title="definition">unstamp_ty</span></a> <span class="id" title="var">g</span> <span class="id" title="var">T__s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">T__u</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_unstamped_ty"><span class="id" title="abbreviation">is_unstamped_ty</span></a> <span class="id" title="var">T__u</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_stamped_ty"><span class="id" title="abbreviation">is_stamped_ty</span></a> <span class="id" title="var">n</span> <span class="id" title="var">g</span> <span class="id" title="var">T__s</span>).<br/>

<br/>
<span class="comment">(*&nbsp;Unused.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Lemma&nbsp;stamped_idsσ&nbsp;g&nbsp;m&nbsp;n:&nbsp;Forall&nbsp;(is_stamped_vl&nbsp;m&nbsp;g)&nbsp;(idsσ&nbsp;n).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;pose&nbsp;proof&nbsp;(stamped_idsσ_ren&nbsp;g&nbsp;m&nbsp;n&nbsp;(+0))&nbsp;as&nbsp;H.&nbsp;by&nbsp;asimpl&nbsp;in&nbsp;H.&nbsp;Qed.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Core&nbsp;cases&nbsp;of&nbsp;existence&nbsp;of&nbsp;translations.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <a name="stamp_vty"><span class="id" title="definition">stamp_vty</span></a> <span class="id" title="var">g</span> <span class="id" title="var">n</span> <span class="id" title="var">T</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">g'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> := (<a class="idref" href="D.DSub.stamping.core_stamping_defs.html#extract"><span class="id" title="definition">extract</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="D.DSub.syn.syn.html#VlSorts.vstamp"><span class="id" title="constructor">vstamp</span></a> σ <span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">g'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
</div>

<div class="doc">
Unstamped types are already stamped, because they can't contain type
    definitions to stamp. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <a name="unstamped_stamped_type"><span class="id" title="lemma">unstamped_stamped_type</span></a> <span class="id" title="var">T</span> <span class="id" title="var">g</span> <span class="id" title="var">n</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_unstamped_ty"><span class="id" title="abbreviation">is_unstamped_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="D.DSub.syn.syn.html#VlSorts.nclosed"><span class="id" title="definition">nclosed</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_stamped_ty"><span class="id" title="abbreviation">is_stamped_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span> ⇒ <span class="id" title="var">Hus</span>; <span class="id" title="tactic">move</span>: <span class="id" title="var">n</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">T</span> ⇒ <span class="id" title="var">n</span> <span class="id" title="var">Hcl</span>; <span class="id" title="var">inverse</span> <span class="id" title="var">Hus</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">constructor</span> ⇒ //=.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHT</span> || <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHT1</span> || <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHT2</span>; <span class="id" title="tactic">eauto</span> 2; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">fv</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">ev</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">rewrite</span> /= -<a class="idref" href="D.DSub.syn.syn.html#VlSorts.nclosed_vl_ids_equiv"><span class="id" title="lemma">nclosed_vl_ids_equiv</span></a>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">fv</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="var">Arguments</span> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#extraction"><span class="id" title="definition">extraction</span></a>: <span class="id" title="tactic">simpl</span> <span class="id" title="var">never</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">traversals.Trav1</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="stamp_vty_spec"><span class="id" title="lemma">stamp_vty_spec</span></a> {<span class="id" title="var">T</span> <span class="id" title="var">n</span>} <span class="id" title="var">g</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_unstamped_vl"><span class="id" title="abbreviation">is_unstamped_vl</span></a> (<a class="idref" href="D.DSub.syn.syn.html#VlSorts.vty"><span class="id" title="constructor">vty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.nclosed"><span class="id" title="definition">nclosed</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">g'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> := (<a class="idref" href="D.DSub.stamping.core_stamping_defs.html#extract"><span class="id" title="definition">extract</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">v'</span> := (<a class="idref" href="D.DSub.syn.syn.html#VlSorts.vstamp"><span class="id" title="constructor">vstamp</span></a> σ <span class="id" title="var">s</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_vl"><span class="id" title="abbreviation">stamps_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="D.DSub.syn.syn.html#VlSorts.vty"><span class="id" title="constructor">vty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a>) <span class="id" title="var">g'</span> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v'"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <span class="id" title="var">g'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#20f997272999e76cdeba5b5b64c4ad31"><span class="id" title="notation">~[</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#20f997272999e76cdeba5b5b64c4ad31"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">g'</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">s</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> σ<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hus</span> <span class="id" title="var">Hcl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">inverse</span> <span class="id" title="var">Hus</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">Hext</span>: <span class="id" title="var">T</span> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#20f997272999e76cdeba5b5b64c4ad31"><span class="id" title="notation">~[</span></a> <span class="id" title="var">n</span> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#20f997272999e76cdeba5b5b64c4ad31"><span class="id" title="notation">]</span></a> <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#20f997272999e76cdeba5b5b64c4ad31"><span class="id" title="notation">(</span></a><a class="idref" href="D.DSub.stamping.core_stamping_defs.html#extract"><span class="id" title="definition">extract</span></a> <span class="id" title="var">g</span> <span class="id" title="var">n</span> <span class="id" title="var">T</span><a class="idref" href="D.DSub.stamping.core_stamping_defs.html#20f997272999e76cdeba5b5b64c4ad31"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> /<a class="idref" href="D.DSub.stamping.type_extraction_syn.html#extract_spec"><span class="id" title="lemma">extract_spec</span></a> /<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamped_stamped_type"><span class="id" title="lemma">unstamped_stamped_type</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="D.DSub.stamping.core_stamping_defs.html#extract"><span class="id" title="definition">extract</span></a> <span class="id" title="var">g</span> <span class="id" title="var">n</span> <span class="id" title="var">T</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">g'</span> &amp; <span class="id" title="var">s</span> &amp; σ) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="D.DSub.stamping.core_stamping_defs.html#extract"><span class="id" title="definition">extract</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="var">simplify_eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">split_and</span>!; <span class="id" title="tactic">try</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="D.DSub.stamping.traversals.html#Trav1.trav_vstamp"><span class="id" title="constructor">trav_vstamp</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">T'</span> := <span class="id" title="var">T</span>) (<span class="id" title="var">ts'</span> := <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">&lt;[</span></a><a class="idref" href="D.DSub.stamping.core_stamping_defs.html#fresh_stamp"><span class="id" title="definition">fresh_stamp</span></a> <span class="id" title="var">g</span> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">:=</span></a> <span class="id" title="var">T</span><a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#37a2c892720a610d69547926e5ba502d"><span class="id" title="notation">]&gt;</span></a> <span class="id" title="var">g</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= ?<a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.fin_maps.html#lookup_insert"><span class="id" title="lemma">lookup_insert</span></a> //= ?<a class="idref" href="D.DSub.syn.syn.html#1c4b66c9e0c92ec94f15d379af28be7f"><span class="id" title="lemma">closed_subst_ids</span></a><a class="idref" href="D.DSub.syn.syn.html#1c4b66c9e0c92ec94f15d379af28be7f"><span class="id" title="lemma">ρ</span></a> ?<a class="idref" href="D.DSub.syn.syn.html#029bd7083e381a9bf6adbbe735d16d87"><span class="id" title="lemma">length_ids</span></a><a class="idref" href="D.DSub.syn.syn.html#029bd7083e381a9bf6adbbe735d16d87"><span class="id" title="lemma">σ</span></a> //;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="D.DSub.stamping.stampedness_binding.html#7f3cca8ea9d1fc7827be096a54a116a9"><span class="id" title="lemma">is_stamped_ids</span></a><a class="idref" href="D.DSub.stamping.stampedness_binding.html#7f3cca8ea9d1fc7827be096a54a116a9"><span class="id" title="lemma">σ</span></a>, <a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamped_stamped_type"><span class="id" title="lemma">unstamped_stamped_type</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="exists_stamped_vty"><span class="id" title="lemma">exists_stamped_vty</span></a> <span class="id" title="var">T</span> <span class="id" title="var">n</span> <span class="id" title="var">g</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_unstamped_vl"><span class="id" title="abbreviation">is_unstamped_vl</span></a> (<a class="idref" href="D.DSub.syn.syn.html#VlSorts.vty"><span class="id" title="constructor">vty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.nclosed_vl"><span class="id" title="definition">nclosed_vl</span></a> (<a class="idref" href="D.DSub.syn.syn.html#VlSorts.vty"><span class="id" title="constructor">vty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a>) <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a> <span class="id" title="var">v'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a> <span class="id" title="var">g'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_vl"><span class="id" title="abbreviation">stamps_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="D.DSub.syn.syn.html#VlSorts.vty"><span class="id" title="constructor">vty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a>) <a class="idref" href="D.DSub.stamping.ast_stamping.html#g'"><span class="id" title="variable">g'</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v'"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g'"><span class="id" title="variable">g'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hus</span> <span class="id" title="var">Hclv</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamp_vty"><span class="id" title="definition">stamp_vty</span></a> <span class="id" title="var">g</span> <span class="id" title="var">n</span> <span class="id" title="var">T</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">v'</span>, <span class="id" title="var">g'</span>) <span class="id" title="var">eqn</span>:?.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">HclT</span>: <a class="idref" href="D.DSub.syn.syn.html#VlSorts.nclosed"><span class="id" title="definition">nclosed</span></a> <span class="id" title="var">T</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">by</span> <span class="id" title="var">solve_inv_fv_congruence_h</span> <span class="id" title="var">Hclv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">edestruct</span> (<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamp_vty_spec"><span class="id" title="lemma">stamp_vty_spec</span></a> <span class="id" title="var">g</span> <span class="id" title="var">Hus</span> <span class="id" title="var">HclT</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">v'</span>, <span class="id" title="var">g'</span>; <span class="id" title="var">simplify_eq</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="var_stamps_to_self1"><span class="id" title="lemma">var_stamps_to_self1</span></a> <span class="id" title="var">g</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span>: <a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_vl"><span class="id" title="definition">unstamp_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.var_vl"><span class="id" title="constructor">var_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.var_vl"><span class="id" title="constructor">var_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#x"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">case</span>: <span class="id" title="var">v</span> ⇒ //= σ <span class="id" title="var">s</span>. <span class="id" title="tactic">move</span>: (<span class="id" title="var">g</span><a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a><span class="id" title="var">s</span>) ⇒ [<span class="id" title="var">T</span>|] /= <span class="id" title="var">Heq</span>; <span class="id" title="var">simplify_eq</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="var_stamps_to_self"><span class="id" title="lemma">var_stamps_to_self</span></a> <span class="id" title="var">n</span> <span class="id" title="var">g</span> <span class="id" title="var">x</span> <span class="id" title="var">v</span>: <a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_vl"><span class="id" title="abbreviation">stamps_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="D.DSub.syn.syn.html#VlSorts.var_vl"><span class="id" title="constructor">var_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#x"><span class="id" title="variable">x</span></a>) <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.var_vl"><span class="id" title="constructor">var_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#x"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">move</span>⇒ [<span class="id" title="var">Heq</span> <span class="id" title="var">_</span>]. <span class="id" title="tactic">exact</span>: <a class="idref" href="D.DSub.stamping.ast_stamping.html#var_stamps_to_self1"><span class="id" title="lemma">var_stamps_to_self1</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="stamps_tm_skip"><span class="id" title="lemma">stamps_tm_skip</span></a> <span class="id" title="var">n</span> <span class="id" title="var">g</span> <span class="id" title="var">i</span> <span class="id" title="var">e</span> <span class="id" title="var">e'</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_tm"><span class="id" title="abbreviation">stamps_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e"><span class="id" title="variable">e</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e'"><span class="id" title="variable">e'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_tm"><span class="id" title="abbreviation">stamps_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="'https://www.ps.uni-saarland.de/autosubst/doc/'/Autosubst.Autosubst_Basics.html#iterate"><span class="id" title="definition">iterate</span></a> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.tskip"><span class="id" title="constructor">tskip</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e"><span class="id" title="variable">e</span></a>) <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> (<a class="idref" href="'https://www.ps.uni-saarland.de/autosubst/doc/'/Autosubst.Autosubst_Basics.html#iterate"><span class="id" title="definition">iterate</span></a> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.tskip"><span class="id" title="constructor">tskip</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#i"><span class="id" title="variable">i</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e'"><span class="id" title="variable">e'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span> ⇒ [<span class="id" title="var">Heq</span> [<span class="id" title="var">Hus</span> <span class="id" title="var">Hs</span>]]. <span class="id" title="tactic">elim</span>: <span class="id" title="var">i</span> ⇒ [//|] <span class="id" title="var">i</span> [<span class="id" title="var">IHeq</span> [<span class="id" title="var">IHus</span> <span class="id" title="var">IHs</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="'https://www.ps.uni-saarland.de/autosubst/doc/'/Autosubst.Autosubst_Basics.html#iterate_S"><span class="id" title="lemma">iterate_S</span></a> /=. <span class="id" title="var">split_and</span>!; <span class="id" title="tactic">by</span> [<span class="id" title="tactic">constructor</span>| <span class="id" title="var">f_equiv</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Hint Resolve</span> <span class="id" title="var">stamps_tm_skip</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="exists_stamped_vstamp"><span class="id" title="lemma">exists_stamped_vstamp</span></a> <span class="id" title="var">vs</span> <span class="id" title="var">s</span> <span class="id" title="var">n</span> <span class="id" title="var">g</span>: <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_unstamped_vl"><span class="id" title="abbreviation">is_unstamped_vl</span></a> (<a class="idref" href="D.DSub.syn.syn.html#VlSorts.vstamp"><span class="id" title="constructor">vstamp</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.nclosed_vl"><span class="id" title="definition">nclosed_vl</span></a> (<a class="idref" href="D.DSub.syn.syn.html#VlSorts.vstamp"><span class="id" title="constructor">vstamp</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a> <span class="id" title="var">v'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a> <span class="id" title="var">g'</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_vl"><span class="id" title="abbreviation">stamps_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> (<a class="idref" href="D.DSub.syn.syn.html#VlSorts.vstamp"><span class="id" title="constructor">vstamp</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="D.DSub.stamping.ast_stamping.html#g'"><span class="id" title="variable">g'</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v'"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g"><span class="id" title="variable">g</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g'"><span class="id" title="variable">g'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="var">exfalso</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="stamps_unstamp_vstamp_mono"><span class="id" title="lemma">stamps_unstamp_vstamp_mono</span></a> <span class="id" title="var">g1</span> <span class="id" title="var">g2</span> <span class="id" title="var">n</span> <span class="id" title="var">v__u</span> <span class="id" title="var">vs</span> <span class="id" title="var">s</span>:<br/>
&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_vl"><span class="id" title="abbreviation">stamps_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v__u"><span class="id" title="variable">v__u</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> (<a class="idref" href="D.DSub.syn.syn.html#VlSorts.vstamp"><span class="id" title="constructor">vstamp</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_vl"><span class="id" title="definition">unstamp_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> (<a class="idref" href="D.DSub.syn.syn.html#VlSorts.vstamp"><span class="id" title="constructor">vstamp</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#vs"><span class="id" title="variable">vs</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#s"><span class="id" title="variable">s</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v__u"><span class="id" title="variable">v__u</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hg</span> (<span class="id" title="var">Huns</span> &amp; <span class="id" title="var">_</span> &amp; <span class="id" title="var">Hs</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">∃</span></a> <span class="id" title="var">T</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#94e052c6337a815c52cda44eea9df276"><span class="id" title="notation">,</span></a> <span class="id" title="var">g1</span> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T"><span class="id" title="variable">T</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">T__s</span> <span class="id" title="var">Hlook1</span>]. <span class="id" title="tactic">by</span> <span class="id" title="var">inverse</span> <span class="id" title="var">Hs</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">ev</span>; <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">g2</span> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#4fa0a1d38759705f0ddcbbfc0f886b59"><span class="id" title="notation">!!</span></a> <span class="id" title="var">s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">T__s</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hlook2</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.fin_maps.html#map_subseteq_spec"><span class="id" title="lemma">map_subseteq_spec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Huns</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">Hlook1</span> <span class="id" title="var">Hlook2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="stamps_unstamp_mono_mut"><span class="id" title="lemma">stamps_unstamp_mono_mut</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">e__s</span> <span class="id" title="var">g1</span> <span class="id" title="var">g2</span> <span class="id" title="var">n</span> <span class="id" title="var">e__u</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_tm"><span class="id" title="abbreviation">stamps_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e__u"><span class="id" title="variable">e__u</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e__s"><span class="id" title="variable">e__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_tm"><span class="id" title="definition">unstamp_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e__s"><span class="id" title="variable">e__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e__u"><span class="id" title="variable">e__u</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">v__s</span> <span class="id" title="var">g1</span> <span class="id" title="var">g2</span> <span class="id" title="var">n</span> <span class="id" title="var">v__u</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_vl"><span class="id" title="abbreviation">stamps_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v__u"><span class="id" title="variable">v__u</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v__s"><span class="id" title="variable">v__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_vl"><span class="id" title="definition">unstamp_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v__s"><span class="id" title="variable">v__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v__u"><span class="id" title="variable">v__u</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <span class="id" title="var">T__s</span> <span class="id" title="var">g1</span> <span class="id" title="var">g2</span> <span class="id" title="var">n</span> <span class="id" title="var">T__u</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_ty"><span class="id" title="abbreviation">stamps_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T__u"><span class="id" title="variable">T__u</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T__s"><span class="id" title="variable">T__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_ty"><span class="id" title="definition">unstamp_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T__s"><span class="id" title="variable">T__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T__u"><span class="id" title="variable">T__u</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="D.DSub.syn.syn.html#syntax_mut_ind"><span class="id" title="lemma">syntax_mut_ind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">ev</span>; <span class="id" title="tactic">try</span> (<span class="id" title="tactic">exact</span>: <a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_unstamp_vstamp_mono"><span class="id" title="lemma">stamps_unstamp_vstamp_mono</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">with_is_stamped</span> <span class="id" title="var">inverse</span>; <span class="id" title="var">with_is_unstamped</span> <span class="id" title="var">inverse</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">naive_solver</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="stamps_unstamp_mono_tm"><span class="id" title="lemma">stamps_unstamp_mono_tm</span></a> <span class="id" title="var">e__s</span> <span class="id" title="var">g1</span> <span class="id" title="var">g2</span> <span class="id" title="var">n</span> <span class="id" title="var">e__u</span>: <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_tm"><span class="id" title="abbreviation">stamps_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e__u"><span class="id" title="variable">e__u</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e__s"><span class="id" title="variable">e__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_tm"><span class="id" title="definition">unstamp_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e__s"><span class="id" title="variable">e__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#e__u"><span class="id" title="variable">e__u</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_unstamp_mono_mut"><span class="id" title="lemma">stamps_unstamp_mono_mut</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a name="stamps_unstamp_mono_vl"><span class="id" title="lemma">stamps_unstamp_mono_vl</span></a> (<span class="id" title="var">v__s</span>: <a class="idref" href="D.DSub.syn.syn.html#VlSorts.vl"><span class="id" title="definition">vl</span></a>) <span class="id" title="var">g1</span> <span class="id" title="var">g2</span> <span class="id" title="var">n</span> <span class="id" title="var">v__u</span> : <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_vl"><span class="id" title="abbreviation">stamps_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v__u"><span class="id" title="variable">v__u</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v__s"><span class="id" title="variable">v__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_vl"><span class="id" title="definition">unstamp_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v__s"><span class="id" title="variable">v__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#v__u"><span class="id" title="variable">v__u</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_unstamp_mono_mut"><span class="id" title="lemma">stamps_unstamp_mono_mut</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a name="stamps_unstamp_mono_ty"><span class="id" title="lemma">stamps_unstamp_mono_ty</span></a> <span class="id" title="var">T__s</span> <span class="id" title="var">g1</span> <span class="id" title="var">g2</span> <span class="id" title="var">n</span> <span class="id" title="var">T__u</span> : <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_ty"><span class="id" title="abbreviation">stamps_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T__u"><span class="id" title="variable">T__u</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T__s"><span class="id" title="variable">T__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.DSub.stamping.ast_stamping.html#unstamp_ty"><span class="id" title="definition">unstamp_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T__s"><span class="id" title="variable">T__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#T__u"><span class="id" title="variable">T__u</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_unstamp_mono_mut"><span class="id" title="lemma">stamps_unstamp_mono_mut</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">pick_lemma</span> <span class="id" title="var">lty</span> <span class="id" title="var">ltm</span> <span class="id" title="var">lvl</span> <span class="id" title="var">trm</span> <span class="id" title="var">tac</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">L</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">trm</span> <span class="id" title="keyword">with</span> | <a class="idref" href="D.DSub.syn.syn.html#VlSorts.ty"><span class="id" title="inductive">ty</span></a> ⇒ <span class="id" title="var">lty</span> | <a class="idref" href="D.DSub.syn.syn.html#VlSorts.tm"><span class="id" title="inductive">tm</span></a> ⇒ <span class="id" title="var">ltm</span> | <a class="idref" href="D.DSub.syn.syn.html#VlSorts.vl_"><span class="id" title="inductive">vl_</span></a> ⇒ <span class="id" title="var">lvl</span> <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="var">tac</span> <span class="id" title="var">L</span>.<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">pick_stamps_unstamp_mono</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">pick_lemma</span> <span class="id" title="keyword">constr</span>:(<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_unstamp_mono_ty"><span class="id" title="lemma">stamps_unstamp_mono_ty</span></a>) <span class="id" title="keyword">constr</span>:(<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_unstamp_mono_tm"><span class="id" title="lemma">stamps_unstamp_mono_tm</span></a>) <span class="id" title="keyword">constr</span>:(<a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_unstamp_mono_vl"><span class="id" title="lemma">stamps_unstamp_mono_vl</span></a>).<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">pick_is_stamped_mono</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">pick_lemma</span> <span class="id" title="keyword">constr</span>:(<a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_stamped_mono_ty"><span class="id" title="axiom">is_stamped_mono_ty</span></a>) <span class="id" title="keyword">constr</span>:(<a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_stamped_mono_tm"><span class="id" title="lemma">is_stamped_mono_tm</span></a>) <span class="id" title="keyword">constr</span>:(<a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_stamped_mono_vl"><span class="id" title="axiom">is_stamped_mono_vl</span></a>).<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">pick_nclosed</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">pick_lemma</span> <span class="id" title="var">uconstr</span>:(<a class="idref" href="D.DSub.syn.syn.html#VlSorts.nclosed"><span class="id" title="definition">nclosed</span></a>) <span class="id" title="var">uconstr</span>:(<a class="idref" href="D.DSub.syn.syn.html#VlSorts.nclosed"><span class="id" title="definition">nclosed</span></a>) <span class="id" title="var">uconstr</span>:(<a class="idref" href="D.DSub.syn.syn.html#VlSorts.nclosed_vl"><span class="id" title="definition">nclosed_vl</span></a>).<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">assert_closed</span> <span class="id" title="var">n</span> <span class="id" title="var">t</span> <span class="id" title="var">Hcl</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">pick_nclosed</span> <span class="id" title="var">t</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">D</span> ⇒ <span class="id" title="tactic">assert</span> (<span class="id" title="var">D</span> <span class="id" title="var">t</span> <span class="id" title="var">n</span>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">move</span>: <span class="id" title="var">Hcl</span>; <span class="id" title="var">solve_inv_fv_congruence</span>)).<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">with_freevars</span> <span class="id" title="var">n</span> <span class="id" title="var">t</span> <span class="id" title="var">Hcl</span> <span class="id" title="var">tac</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="var">assert_closed</span> <span class="id" title="var">n</span> <span class="id" title="var">t</span> <span class="id" title="var">Hcl</span>; <span class="id" title="var">tac</span> <span class="id" title="var">n</span>) || (<span class="id" title="var">assert_closed</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">t</span> <span class="id" title="var">Hcl</span>; <span class="id" title="var">tac</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>)).<br/>
<span class="comment">(*&nbsp;Maybe&nbsp;it'd&nbsp;be&nbsp;better&nbsp;to&nbsp;write&nbsp;the&nbsp;translation&nbsp;as&nbsp;a&nbsp;plain&nbsp;recursive&nbsp;function.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a name="exists_stamped_vl"><span class="id" title="definition">exists_stamped_vl</span></a> <span class="id" title="var">t__u</span> <span class="id" title="var">g1</span> <span class="id" title="var">n</span> {<span class="id" title="keyword">struct</span> <span class="id" title="var">t__u</span>}: <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_unstamped_vl"><span class="id" title="abbreviation">is_unstamped_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t__u"><span class="id" title="variable">t__u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.nclosed_vl"><span class="id" title="definition">nclosed_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t__u"><span class="id" title="variable">t__u</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a> <span class="id" title="var">t__s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a> <span class="id" title="var">g2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_vl"><span class="id" title="abbreviation">stamps_vl</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t__u"><span class="id" title="variable">t__u</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t__s"><span class="id" title="variable">t__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a><br/>
<span class="id" title="keyword">with</span> <a name="exists_stamped_tm"><span class="id" title="definition">exists_stamped_tm</span></a> <span class="id" title="var">t__u</span> <span class="id" title="var">g1</span> <span class="id" title="var">n</span> {<span class="id" title="keyword">struct</span> <span class="id" title="var">t__u</span>}: <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_unstamped_tm"><span class="id" title="abbreviation">is_unstamped_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t__u"><span class="id" title="variable">t__u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.nclosed"><span class="id" title="definition">nclosed</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t__u"><span class="id" title="variable">t__u</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a> <span class="id" title="var">t__s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a> <span class="id" title="var">g2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_tm"><span class="id" title="abbreviation">stamps_tm</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t__u"><span class="id" title="variable">t__u</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t__s"><span class="id" title="variable">t__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a><br/>
<span class="id" title="keyword">with</span> <a name="exists_stamped_ty"><span class="id" title="definition">exists_stamped_ty</span></a> <span class="id" title="var">t__u</span> <span class="id" title="var">g1</span> <span class="id" title="var">n</span> {<span class="id" title="keyword">struct</span> <span class="id" title="var">t__u</span>}: <a class="idref" href="D.DSub.stamping.core_stamping_defs.html#is_unstamped_ty"><span class="id" title="abbreviation">is_unstamped_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t__u"><span class="id" title="variable">t__u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.nclosed"><span class="id" title="definition">nclosed</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t__u"><span class="id" title="variable">t__u</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a> <span class="id" title="var">t__s</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a> <span class="id" title="var">g2</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#stamps_ty"><span class="id" title="abbreviation">stamps_ty</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#n"><span class="id" title="variable">n</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t__u"><span class="id" title="variable">t__u</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#t__s"><span class="id" title="variable">t__s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g1"><span class="id" title="variable">g1</span></a> <a class="idref" href="'https://plv.mpi-sws.org/coqdoc/stdpp/'/stdpp.base.html#7472ec14e3f8670903ae6b55a0e2f38c"><span class="id" title="notation">⊆</span></a> <a class="idref" href="D.DSub.stamping.ast_stamping.html#g2"><span class="id" title="variable">g2</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">intros</span> <span class="id" title="var">Hus</span> <span class="id" title="var">Hcl</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">t__u</span> <span class="id" title="var">eqn</span>:?; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> (<span class="id" title="tactic">abstract</span> <span class="id" title="tactic">by</span> [<span class="id" title="tactic">∃</span> <span class="id" title="var">t__u</span>; <span class="id" title="tactic">∃</span> <span class="id" title="var">g1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span> =&gt;// | <span class="id" title="tactic">eapply</span> <a class="idref" href="D.DSub.stamping.ast_stamping.html#exists_stamped_vstamp"><span class="id" title="lemma">exists_stamped_vstamp</span></a> | <span class="id" title="tactic">eapply</span> <a class="idref" href="D.DSub.stamping.ast_stamping.html#exists_stamped_vty"><span class="id" title="lemma">exists_stamped_vty</span></a>]).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick_exists_stamped</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick_lemma</span> <span class="id" title="keyword">constr</span>:(<span class="id" title="var">exists_stamped_ty</span>) <span class="id" title="keyword">constr</span>:(<span class="id" title="var">exists_stamped_tm</span>) <span class="id" title="keyword">constr</span>:(<span class="id" title="var">exists_stamped_vl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">recurse</span> <span class="id" title="var">L</span> <span class="id" title="var">t</span> <span class="id" title="var">g</span> <span class="id" title="var">n</span> <span class="id" title="var">t__s</span> <span class="id" title="var">g2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">efeed</span> (<span class="id" title="var">L</span> <span class="id" title="var">t</span> <span class="id" title="var">g</span> <span class="id" title="var">n</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">using</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> ⇒ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t__s</span> &amp; <span class="id" title="var">g2</span> &amp; ?))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> (<span class="id" title="tactic">by</span> [ | <span class="id" title="var">inverse</span> <span class="id" title="var">Hus</span> ])<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span> <span class="id" title="keyword">let</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">smartRecurse</span> <span class="id" title="var">t</span> <span class="id" title="var">t__s</span> <span class="id" title="var">g1</span> <span class="id" title="var">g2</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">with_freevars</span> <span class="id" title="var">n</span> <span class="id" title="var">t</span> <span class="id" title="var">Hcl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">n'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick_exists_stamped</span> <span class="id" title="var">t</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">L</span> ⇒ <span class="id" title="var">recurse</span> <span class="id" title="var">L</span> <span class="id" title="var">t</span> <span class="id" title="var">g1</span> <span class="id" title="var">n'</span> <span class="id" title="var">t__s</span> <span class="id" title="var">g2</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">{</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">c</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Unicode.Utf8_core.html#3668992ecc3e95973d304a75a28051a2"><span class="id" title="notation">∧</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#bc4528e836ab0e91ea7e942fb09e898f"><span class="id" title="notation">}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.11.1/stdlib//Coq.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="var">c</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| ?<span class="id" title="var">c</span> ?<span class="id" title="var">t1</span> ?<span class="id" title="var">t2</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">smartRecurse</span> <span class="id" title="var">t1</span> <span class="id" title="var">t__s1</span> <span class="id" title="var">g1</span> <span class="id" title="var">g2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">smartRecurse</span> <span class="id" title="var">t2</span> <span class="id" title="var">t__s2</span> <span class="id" title="var">g2</span> <span class="id" title="var">g3</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ev</span>; <span class="id" title="tactic">∃</span> (<span class="id" title="var">c</span> <span class="id" title="var">t__s1</span> <span class="id" title="var">t__s2</span>), <span class="id" title="var">g3</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hus</span>; <span class="id" title="var">cbn</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pick_stamps_unstamp_mono</span> <span class="id" title="var">t1</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">L</span> ⇒ <span class="id" title="var">erewrite</span> (<span class="id" title="var">L</span> <span class="id" title="var">_</span> <span class="id" title="var">g2</span> <span class="id" title="var">g3</span> <span class="id" title="var">_</span> <span class="id" title="var">t1</span>) ⇒ //);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simplify_order</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">f_equal</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> [| <span class="id" title="var">pick_is_stamped_mono</span> <span class="id" title="var">t__s1</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="keyword">fun</span> <span class="id" title="var">L</span> ⇒ <span class="id" title="tactic">eapply</span> (<span class="id" title="var">L</span> <span class="id" title="var">g2</span>))]]<br/>
      | ?<span class="id" title="var">c</span> ?<span class="id" title="var">t1</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">smartRecurse</span> <span class="id" title="var">t1</span> <span class="id" title="var">t__s1</span> <span class="id" title="var">g1</span> <span class="id" title="var">g2</span>; <span class="id" title="var">ev</span>; <span class="id" title="tactic">∃</span> (<span class="id" title="var">c</span> <span class="id" title="var">t__s1</span>), <span class="id" title="var">g2</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inverse</span> <span class="id" title="var">Hus</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">by</span> [|<span class="id" title="tactic">f_equal</span>/=]]<br/>
      <span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">∃</span> <span class="id" title="var">t__u</span>, <span class="id" title="var">g1</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="D.DSub.syn.syn.html#VlSorts.nclosed_var_lt"><span class="id" title="lemma">nclosed_var_lt</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
