<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">D.Dot.semtyp_lemmas.tproj_lr</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab104"></a><h1 class="section">Semantic lemmas for Scala 2 type projections <span class="inlinecode"><span class="id" title="var">T</span>#<span class="id" title="var">A</span></span>.</h1>


<div class="paragraph"> </div>

This shows how to restrict type projections to be sound and usable in Dotty.

<div class="paragraph"> </div>

This is developed as an <i>extension</i> of guarded DOT (gDOT), described in the
ICFP'20 paper "Scala Step-by-Step". (Homepage:
<a href="https://dot-iris.github.io">
https://dot-iris.github.io</a>
).

<div class="paragraph"> </div>

Because of the interest to the wider Scala community, this file has extensive
informal comments.

<div class="paragraph"> </div>

The comments use a "naive" understanding of types as sets; this Coq
development is based on this understanding, but with some restrictions
discussed in the paper.

</div>
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">iris.proofmode</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.tactics.html#"><span class="id" title="library">tactics</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">D</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="D.iris_extra.swap_later_impl.html#"><span class="id" title="library">swap_later_impl</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">D.Dot</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="D.Dot.lr.unary_lr.html#"><span class="id" title="library">unary_lr</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.dsub_lr.html#"><span class="id" title="library">dsub_lr</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.defs_lr.html#"><span class="id" title="library">defs_lr</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.path_repl_lr.html#"><span class="id" title="library">path_repl_lr</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">D.Dot</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="D.Dot.lr.sem_unstamped_typing.html#"><span class="id" title="library">sem_unstamped_typing</span></a>.<br/>

<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">Σ</span> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.base_logic.lib.iprop.html#gFunctors"><span class="id" title="definition">gFunctors</span></a>).<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">v</span>: <a class="idref" href="D.Dot.syn.syn.html#VlSorts.vl"><span class="id" title="definition">vl</span></a>) (<span class="id" title="var">e</span>: <a class="idref" href="D.Dot.syn.syn.html#VlSorts.tm"><span class="id" title="inductive">tm</span></a>) (<span class="id" title="var">d</span>: <a class="idref" href="D.Dot.syn.syn.html#VlSorts.dm"><span class="id" title="inductive">dm</span></a>) (<span class="id" title="var">ds</span>: <a class="idref" href="D.Dot.syn.syn.html#VlSorts.dms"><span class="id" title="definition">dms</span></a>) (ρ : <a class="idref" href="D.Dot.syn.syn.html#VlSorts.env"><span class="id" title="definition">env</span></a>) (<span class="id" title="var">l</span> : <a class="idref" href="D.Dot.syn.syn.html#VlSorts.label"><span class="id" title="definition">label</span></a>).<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Suggest</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="oExists" class="idref" href="#oExists"><span class="id" title="definition">oExists</span></a> `{<a id="dlangG0:2" class="idref" href="#dlangG0:2"><span class="id" title="binder">!</span></a><a id="dlangG0:2" class="idref" href="#dlangG0:2"><span class="id" title="binder">dlangG</span></a> <a id="dlangG0:2" class="idref" href="#dlangG0:2"><span class="id" title="binder">Σ</span></a>} {<a id="n:3" class="idref" href="#n:3"><span class="id" title="binder">n</span></a>} (<a id="T:4" class="idref" href="#T:4"><span class="id" title="binder">T</span></a> : <a class="idref" href="D.Dot.lr.dot_lty.html#oltyO"><span class="id" title="abbreviation">oltyO</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="variable">Σ</span></a> 0) (<a id="U:5" class="idref" href="#U:5"><span class="id" title="binder">U</span></a> : <a class="idref" href="D.Dot.lr.dot_lty.html#oltyO"><span class="id" title="abbreviation">oltyO</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="variable">Σ</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#n:3"><span class="id" title="variable">n</span></a>) : <a class="idref" href="D.Dot.lr.dot_lty.html#oltyO"><span class="id" title="abbreviation">oltyO</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#0101b9beac487b383a5ba2a8f6922788"><span class="id" title="variable">Σ</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#n:3"><span class="id" title="variable">n</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="D.Dot.lr.dot_lty.html#Olty"><span class="id" title="definition">Olty</span></a> (<a class="idref" href="D.iris_extra.iris_prelude.html#20319bb2b4b1b488f74bc651672f060a"><span class="id" title="notation">λI</span></a> <a id="args:6" class="idref" href="#args:6"><span class="id" title="binder">args</span></a> <a id="9d3848eaa2dcabf683c0d84a4b2fd864" class="idref" href="#9d3848eaa2dcabf683c0d84a4b2fd864"><span class="id" title="binder">ρ</span></a> <a id="v:8" class="idref" href="#v:8"><span class="id" title="binder">v</span></a><a class="idref" href="D.iris_extra.iris_prelude.html#20319bb2b4b1b488f74bc651672f060a"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="w:9" class="idref" href="#w:9"><span class="id" title="binder">w</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;w&nbsp;∈&nbsp;T&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="D.Dot.lr.dot_lty.html#oClose"><span class="id" title="abbreviation">oClose</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:4"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#9d3848eaa2dcabf683c0d84a4b2fd864"><span class="id" title="variable">ρ</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#w:9"><span class="id" title="variable">w</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#285322c305ec6868ebb70cbafa909038"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;v&nbsp;∈&nbsp;w.A&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:5"><span class="id" title="variable">U</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#args:6"><span class="id" title="variable">args</span></a> (<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#w:9"><span class="id" title="variable">w</span></a> <a class="idref" href="https://www.ps.uni-saarland.de/autosubst/doc/Autosubst.Autosubst_Basics.html#::subst_scope:x_'.:'_x"><span class="id" title="notation">.:</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#9d3848eaa2dcabf683c0d84a4b2fd864"><span class="id" title="variable">ρ</span></a>) <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#v:8"><span class="id" title="variable">v</span></a>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab105"></a><h2 class="section">Semantic proofs of typing lemmas for existentials.</h2>


<div class="paragraph"> </div>

I adapted the rules from
<a href="https://dl.acm.org/doi/pdf/10.1145/3290322">
https://dl.acm.org/doi/pdf/10.1145/3290322</a>

(see <span class="inlinecode">≤∃<a class="idref" href="D.iris_extra.det_reduction.html#L"><span class="id" title="module">L</span></a></span> and <span class="inlinecode">≤∃<span class="id" title="var">R</span></span> in Fig. 4).

<div class="paragraph"> </div>

Lionel Parreaux pointed me to that paper and suggested they are the
"standard" rules for "implicit" existentials.

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="existentials" class="idref" href="#existentials"><span class="id" title="section">existentials</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="dlangG0:11" class="idref" href="#dlangG0:11"><span class="id" title="binder">!</span></a><a id="dlangG0:11" class="idref" href="#dlangG0:11"><span class="id" title="binder">dlangG</span></a> <a id="dlangG0:11" class="idref" href="#dlangG0:11"><span class="id" title="binder">Σ</span></a>}.<br/>

<br/>
</div>

<div class="doc">
Rule <span class="inlinecode">∃-&lt;:</span> (called <span class="inlinecode">≤∃<a class="idref" href="D.iris_extra.det_reduction.html#L"><span class="id" title="module">L</span></a></span> in the link). 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sEx_Stp" class="idref" href="#sEx_Stp"><span class="id" title="lemma">sEx_Stp</span></a> `{<a id="SwapPropI0:12" class="idref" href="#SwapPropI0:12"><span class="id" title="binder">!</span></a><a id="SwapPropI0:12" class="idref" href="#SwapPropI0:12"><span class="id" title="binder">SwapPropI</span></a> <a id="SwapPropI0:12" class="idref" href="#SwapPropI0:12"><span class="id" title="binder">Σ</span></a>} <a id="a57704a48aaf9a67d8a3df75d6eea365" class="idref" href="#a57704a48aaf9a67d8a3df75d6eea365"><span class="id" title="binder">Γ</span></a> <a id="S:14" class="idref" href="#S:14"><span class="id" title="binder">S</span></a> <a id="T:15" class="idref" href="#T:15"><span class="id" title="binder">T</span></a> (<a id="U:16" class="idref" href="#U:16"><span class="id" title="binder">U</span></a> : <a class="idref" href="D.Dot.lr.dot_lty.html#oltyO"><span class="id" title="abbreviation">oltyO</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#c8f6cd51d8dbd39d3b294877dd521a47"><span class="id" title="variable">Σ</span></a> 0) <a id="i:17" class="idref" href="#i:17"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.lr.dot_lty.html#oLaterN"><span class="id" title="definition">oLaterN</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:17"><span class="id" title="variable">i</span></a> (<a class="idref" href="D.Dot.lr.dot_lty.html#oShift"><span class="id" title="definition">oShift</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#S:14"><span class="id" title="variable">S</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#a57704a48aaf9a67d8a3df75d6eea365"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:15"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:17"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.lr.dot_lty.html#oShift"><span class="id" title="definition">oShift</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:16"><span class="id" title="variable">U</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#a57704a48aaf9a67d8a3df75d6eea365"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oExists"><span class="id" title="definition">oExists</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#S:14"><span class="id" title="variable">S</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:15"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:17"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:16"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "/= &gt;#Hstp !&gt; %ρ Hg %v"; <span class="id" title="var">iApply</span> <a class="idref" href="D.iris_extra.swap_later_impl.html#impl_laterN"><span class="id" title="lemma">impl_laterN</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">w</span>) "[HS HT]".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a>"Hstp" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">$!</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">(</span></a><span class="id" title="var">w</span> <a class="idref" href="https://www.ps.uni-saarland.de/autosubst/doc/Autosubst.Autosubst_Basics.html#::subst_scope:x_'.:'_x"><span class="id" title="notation">.:</span></a> ρ<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">with</span></a> "[$Hg $HS] HT"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#e0200f70855f988886fbc8c4fdcdb53d"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Rule <span class="inlinecode">&lt;:-∃</span> (called <span class="inlinecode">≤∃<a class="idref" href="D.iris_extra.det_reduction.html#L"><span class="id" title="module">L</span></a></span> in the link). 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sStp_Ex" class="idref" href="#sStp_Ex"><span class="id" title="lemma">sStp_Ex</span></a> `{<a id="SwapPropI0:18" class="idref" href="#SwapPropI0:18"><span class="id" title="binder">!</span></a><a id="SwapPropI0:18" class="idref" href="#SwapPropI0:18"><span class="id" title="binder">SwapPropI</span></a> <a id="SwapPropI0:18" class="idref" href="#SwapPropI0:18"><span class="id" title="binder">Σ</span></a>} <a id="d2f974a479ebcd81c5829843a3f7c760" class="idref" href="#d2f974a479ebcd81c5829843a3f7c760"><span class="id" title="binder">Γ</span></a> <a id="S:20" class="idref" href="#S:20"><span class="id" title="binder">S</span></a> <a id="T:21" class="idref" href="#T:21"><span class="id" title="binder">T</span></a> (<a id="U:22" class="idref" href="#U:22"><span class="id" title="binder">U</span></a> : <a class="idref" href="D.Dot.lr.dot_lty.html#oltyO"><span class="id" title="abbreviation">oltyO</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#c8f6cd51d8dbd39d3b294877dd521a47"><span class="id" title="variable">Σ</span></a> 0) <a id="i:23" class="idref" href="#i:23"><span class="id" title="binder">i</span></a> <a id="p:24" class="idref" href="#p:24"><span class="id" title="binder">p</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#d2f974a479ebcd81c5829843a3f7c760"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">⊨</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">p</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#p:24"><span class="id" title="variable">p</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">:</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#S:20"><span class="id" title="variable">S</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">,</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:23"><span class="id" title="variable">i</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#d2f974a479ebcd81c5829843a3f7c760"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:21"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:23"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#opSubst"><span class="id" title="definition">opSubst</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#p:24"><span class="id" title="variable">p</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:22"><span class="id" title="variable">U</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#d2f974a479ebcd81c5829843a3f7c760"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:21"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:23"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oExists"><span class="id" title="definition">oExists</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#S:20"><span class="id" title="variable">S</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:22"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "/= &gt;#HpS &gt;#Hstp !&gt; %ρ #Hg".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iSpecialize</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"HpS" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hg"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="var">iSpecialize</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hstp" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hg"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="var">iNext</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.lr.dot_lty.html#subtype_trans"><span class="id" title="lemma">subtype_trans</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hstp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="var">iIntros</span> "%v HvUp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.lr.path_wp.html#path_wp_agree"><span class="id" title="lemma">path_wp_agree</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HpS HvUp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> (<span class="id" title="var">w</span> ?) "Hgoal".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">w</span>. <span class="id" title="var">iApply</span> "Hgoal".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#existentials"><span class="id" title="section">existentials</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab106"></a><h2 class="section">Semantics of type projections.</h2>

  This semantic type models upper-bound-only type projections using
  (model-level) existentials and normal DOT type members:
    <span class="inlinecode"><span class="id" title="var">V</span>[[<span class="id" title="var">T</span>#<span class="id" title="var">A</span>]](ρ)</span> <span class="inlinecode">=</span> <span class="inlinecode">{</span> <span class="inlinecode"><a class="idref" href="D.Dot.examples.sem.no_russell_paradox.html#v"><span class="id" title="definition">v</span></a></span> <span class="inlinecode">|</span> <span class="inlinecode">∃</span> <span class="inlinecode"><span class="id" title="var">w</span></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">V</span>[[<span class="id" title="var">T</span>]](ρ).</span> <span class="inlinecode"><a class="idref" href="D.Dot.examples.sem.no_russell_paradox.html#v"><span class="id" title="definition">v</span></a></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">V</span>[[<span class="id" title="var">w.A</span>]](ρ)</span> <span class="inlinecode">}</span>.

</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="oProjN" class="idref" href="#oProjN"><span class="id" title="definition">oProjN</span></a> `{<a id="dlangG0:26" class="idref" href="#dlangG0:26"><span class="id" title="binder">!</span></a><a id="dlangG0:26" class="idref" href="#dlangG0:26"><span class="id" title="binder">dlangG</span></a> <a id="dlangG0:26" class="idref" href="#dlangG0:26"><span class="id" title="binder">Σ</span></a>} <a id="n:27" class="idref" href="#n:27"><span class="id" title="binder">n</span></a> <a id="A:28" class="idref" href="#A:28"><span class="id" title="binder">A</span></a> (<a id="T:29" class="idref" href="#T:29"><span class="id" title="binder">T</span></a> : <a class="idref" href="D.Dot.lr.dot_lty.html#oltyO"><span class="id" title="abbreviation">oltyO</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#7fd4a516bfc23c1706437f236b640793"><span class="id" title="variable">Σ</span></a> 0) : <a class="idref" href="D.Dot.lr.dot_lty.html#oltyO"><span class="id" title="abbreviation">oltyO</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#7fd4a516bfc23c1706437f236b640793"><span class="id" title="variable">Σ</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#n:27"><span class="id" title="variable">n</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="D.Dot.lr.dot_lty.html#Olty"><span class="id" title="definition">Olty</span></a> (<a class="idref" href="D.iris_extra.iris_prelude.html#20319bb2b4b1b488f74bc651672f060a"><span class="id" title="notation">λI</span></a> <a id="args:30" class="idref" href="#args:30"><span class="id" title="binder">args</span></a> <a id="21a5a9d1bb42088c35cd2f336d25ba3b" class="idref" href="#21a5a9d1bb42088c35cd2f336d25ba3b"><span class="id" title="binder">ρ</span></a> <a id="v:32" class="idref" href="#v:32"><span class="id" title="binder">v</span></a><a class="idref" href="D.iris_extra.iris_prelude.html#20319bb2b4b1b488f74bc651672f060a"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="w:33" class="idref" href="#w:33"><span class="id" title="binder">w</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;w&nbsp;∈&nbsp;T&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="D.Dot.lr.dot_lty.html#oClose"><span class="id" title="abbreviation">oClose</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:29"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#21a5a9d1bb42088c35cd2f336d25ba3b"><span class="id" title="variable">ρ</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#w:33"><span class="id" title="variable">w</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#285322c305ec6868ebb70cbafa909038"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;v&nbsp;∈&nbsp;w.A&nbsp;*)</span><br/>
&nbsp;&nbsp;<a class="idref" href="D.Dot.lr.unary_lr.html#oSelN"><span class="id" title="definition">oSelN</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#n:27"><span class="id" title="variable">n</span></a> (<a class="idref" href="D.Dot.syn.syn.html#VlSorts.pv"><span class="id" title="constructor">pv</span></a> (<a class="idref" href="https://www.ps.uni-saarland.de/autosubst/doc/Autosubst.Autosubst_Classes.html#ids"><span class="id" title="definition">ids</span></a> 0)) <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:28"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#args:30"><span class="id" title="variable">args</span></a> (<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#w:33"><span class="id" title="variable">w</span></a> <a class="idref" href="https://www.ps.uni-saarland.de/autosubst/doc/Autosubst.Autosubst_Basics.html#::subst_scope:x_'.:'_x"><span class="id" title="notation">.:</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#21a5a9d1bb42088c35cd2f336d25ba3b"><span class="id" title="variable">ρ</span></a>) <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#v:32"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Notation</span> <a id="oProj" class="idref" href="#oProj"><span class="id" title="abbreviation">oProj</span></a> <span class="id" title="var">A</span> <span class="id" title="var">T</span> := (<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProjN"><span class="id" title="definition">oProjN</span></a> 0 <span class="id" title="var">A</span> <span class="id" title="var">T</span>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab107"></a><h3 class="section">Technical infrastructure for setoid rewriting.</h3>

</div>
<div class="code">
<span class="id" title="keyword">Instance</span>: <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Classes.Morphisms.html#Params"><span class="id" title="class">Params</span></a> (@<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProjN"><span class="id" title="definition">oProjN</span></a>) 4 := {}.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="type_proj_setoid_equality" class="idref" href="#type_proj_setoid_equality"><span class="id" title="section">type_proj_setoid_equality</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="dlangG0:35" class="idref" href="#dlangG0:35"><span class="id" title="binder">!</span></a><a id="dlangG0:35" class="idref" href="#dlangG0:35"><span class="id" title="binder">dlangG</span></a> <a id="dlangG0:35" class="idref" href="#dlangG0:35"><span class="id" title="binder">Σ</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="oProjN_oExists" class="idref" href="#oProjN_oExists"><span class="id" title="definition">oProjN_oExists</span></a> `{<a id="dlangG1:36" class="idref" href="#dlangG1:36"><span class="id" title="binder">!</span></a><a id="dlangG1:36" class="idref" href="#dlangG1:36"><span class="id" title="binder">dlangG</span></a> <a id="dlangG1:36" class="idref" href="#dlangG1:36"><span class="id" title="binder">Σ</span></a>} <a id="n:37" class="idref" href="#n:37"><span class="id" title="binder">n</span></a> <a id="A:38" class="idref" href="#A:38"><span class="id" title="binder">A</span></a> <a id="T:39" class="idref" href="#T:39"><span class="id" title="binder">T</span></a>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProjN"><span class="id" title="definition">oProjN</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#n:37"><span class="id" title="variable">n</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:38"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:39"><span class="id" title="variable">T</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp/stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oExists"><span class="id" title="definition">oExists</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:39"><span class="id" title="variable">T</span></a> (<a class="idref" href="D.Dot.lr.unary_lr.html#oSelN"><span class="id" title="definition">oSelN</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#n:37"><span class="id" title="variable">n</span></a> (<a class="idref" href="D.Dot.syn.syn.html#VlSorts.pv"><span class="id" title="constructor">pv</span></a> (<a class="idref" href="https://www.ps.uni-saarland.de/autosubst/doc/Autosubst.Autosubst_Classes.html#ids"><span class="id" title="definition">ids</span></a> 0)) <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:38"><span class="id" title="variable">A</span></a>) := <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Classes.RelationClasses.html#reflexivity"><span class="id" title="definition">reflexivity</span></a> <span class="id" title="var">_</span>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="oProjN_ne" class="idref" href="#oProjN_ne"><span class="id" title="instance">oProjN_ne</span></a> <a id="n:40" class="idref" href="#n:40"><span class="id" title="binder">n</span></a> <a id="A:41" class="idref" href="#A:41"><span class="id" title="binder">A</span></a> : <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.algebra.ofe.html#NonExpansive"><span class="id" title="abbreviation">NonExpansive</span></a> (<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProjN"><span class="id" title="definition">oProjN</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#n:40"><span class="id" title="variable">n</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:41"><span class="id" title="variable">A</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_proper_ho</span>. <span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="oProjN_proper" class="idref" href="#oProjN_proper"><span class="id" title="instance">oProjN_proper</span></a> <a id="n:42" class="idref" href="#n:42"><span class="id" title="binder">n</span></a> <a id="A:43" class="idref" href="#A:43"><span class="id" title="binder">A</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp/stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp/stdpp.base.html#31928d49993c0fabf8f2b2af4d6f7e4f"><span class="id" title="notation">(≡)</span></a>) (<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProjN"><span class="id" title="definition">oProjN</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#n:42"><span class="id" title="variable">n</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:43"><span class="id" title="variable">A</span></a>) := <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.algebra.ofe.html#ne_proper"><span class="id" title="lemma">ne_proper</span></a> <span class="id" title="var">_</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="oProjN_eq" class="idref" href="#oProjN_eq"><span class="id" title="lemma">oProjN_eq</span></a> <a id="n:44" class="idref" href="#n:44"><span class="id" title="binder">n</span></a> <a id="A:45" class="idref" href="#A:45"><span class="id" title="binder">A</span></a> <a id="T:46" class="idref" href="#T:46"><span class="id" title="binder">T</span></a> <a id="args:47" class="idref" href="#args:47"><span class="id" title="binder">args</span></a> <a id="6fe501424b3221010e7eef347d08310b" class="idref" href="#6fe501424b3221010e7eef347d08310b"><span class="id" title="binder">ρ</span></a> <a id="v:49" class="idref" href="#v:49"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProjN"><span class="id" title="definition">oProjN</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#n:44"><span class="id" title="variable">n</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:45"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:46"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#args:47"><span class="id" title="variable">args</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#6fe501424b3221010e7eef347d08310b"><span class="id" title="variable">ρ</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#v:49"><span class="id" title="variable">v</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">⊣⊢</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="w:50" class="idref" href="#w:50"><span class="id" title="binder">w</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="D.Dot.lr.dot_lty.html#oClose"><span class="id" title="abbreviation">oClose</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:46"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#6fe501424b3221010e7eef347d08310b"><span class="id" title="variable">ρ</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#w:50"><span class="id" title="variable">w</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#285322c305ec6868ebb70cbafa909038"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#vl_sel"><span class="id" title="definition">vl_sel</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#w:50"><span class="id" title="variable">w</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:45"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#args:47"><span class="id" title="variable">args</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#v:49"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">simpl</span>; <span class="id" title="var">f_equiv</span> ⇒ <span class="id" title="var">w</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="D.Dot.lr.path_wp.html#path_wp_pv_eq"><span class="id" title="lemma">path_wp_pv_eq</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="oProjN_eq_2" class="idref" href="#oProjN_eq_2"><span class="id" title="lemma">oProjN_eq_2</span></a> <a id="n:51" class="idref" href="#n:51"><span class="id" title="binder">n</span></a> <a id="A:52" class="idref" href="#A:52"><span class="id" title="binder">A</span></a> <a id="T:53" class="idref" href="#T:53"><span class="id" title="binder">T</span></a> <a id="args:54" class="idref" href="#args:54"><span class="id" title="binder">args</span></a> <a id="50a33c4201fd324304cf8aae5913de34" class="idref" href="#50a33c4201fd324304cf8aae5913de34"><span class="id" title="binder">ρ</span></a> <a id="v:56" class="idref" href="#v:56"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProjN"><span class="id" title="definition">oProjN</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#n:51"><span class="id" title="variable">n</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:52"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:53"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#args:54"><span class="id" title="variable">args</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#50a33c4201fd324304cf8aae5913de34"><span class="id" title="variable">ρ</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#v:56"><span class="id" title="variable">v</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#ab77735a6abb55d5a41bcd1956005829"><span class="id" title="notation">⊣⊢</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">∃</span></a> <a id="w:57" class="idref" href="#w:57"><span class="id" title="binder">w</span></a> <a id="d:58" class="idref" href="#d:58"><span class="id" title="binder">d</span></a> <a id="53bd798cac3ea04db9b5e3eed7a87884" class="idref" href="#53bd798cac3ea04db9b5e3eed7a87884"><span class="id" title="binder">ψ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#6a949150dff4dc18cd2632b730bdfc23"><span class="id" title="notation">,</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#w:57"><span class="id" title="variable">w</span></a> <a class="idref" href="D.Dot.syn.syn.html#b68e63b11bb21f5f72a220cdbaeb45d5"><span class="id" title="notation">@</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:52"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.syn.syn.html#b68e63b11bb21f5f72a220cdbaeb45d5"><span class="id" title="notation">↘</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#d:58"><span class="id" title="variable">d</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#285322c305ec6868ebb70cbafa909038"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.Dot.lr.dot_lty.html#oClose"><span class="id" title="abbreviation">oClose</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:53"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#50a33c4201fd324304cf8aae5913de34"><span class="id" title="variable">ρ</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#w:57"><span class="id" title="variable">w</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#285322c305ec6868ebb70cbafa909038"><span class="id" title="notation">∧</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#d:58"><span class="id" title="variable">d</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#f68854b25e782d954edbe0eea2f91088"><span class="id" title="notation">↗</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#f68854b25e782d954edbe0eea2f91088"><span class="id" title="notation">n</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#f68854b25e782d954edbe0eea2f91088"><span class="id" title="notation">[</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#n:51"><span class="id" title="variable">n</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#f68854b25e782d954edbe0eea2f91088"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#53bd798cac3ea04db9b5e3eed7a87884"><span class="id" title="variable">ψ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#285322c305ec6868ebb70cbafa909038"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#1ab064278224e8da215d0768a08713fe"><span class="id" title="notation">▷</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#53bd798cac3ea04db9b5e3eed7a87884"><span class="id" title="variable">ψ</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#args:54"><span class="id" title="variable">args</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#v:56"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProjN_eq"><span class="id" title="lemma">oProjN_eq</span></a>; <span class="id" title="var">f_equiv</span> ⇒ <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.derived_laws.html#bi.and_exist_l"><span class="id" title="lemma">and_exist_l</span></a>; <span class="id" title="var">f_equiv</span> ⇒ ψ; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.derived_laws.html#bi.and_exist_l"><span class="id" title="lemma">and_exist_l</span></a>; <span class="id" title="var">f_equiv</span> ⇒ <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp/stdpp.base.html#assoc"><span class="id" title="definition">assoc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#bi_and"><span class="id" title="projection">bi_and</span></a>) [(<span class="id" title="var">_</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#285322c305ec6868ebb70cbafa909038"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#285322c305ec6868ebb70cbafa909038"><span class="id" title="notation">(</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌜</span></a><span class="id" title="var">_</span><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#08ba0c98aaa0db435a5f99ebae3ae8e7"><span class="id" title="notation">⌝</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#285322c305ec6868ebb70cbafa909038"><span class="id" title="notation">)</span></a>)%<span class="id" title="var">I</span>](<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp/stdpp.base.html#comm"><span class="id" title="definition">comm</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#bi_and"><span class="id" title="projection">bi_and</span></a>) -(<a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp/stdpp.base.html#assoc"><span class="id" title="definition">assoc</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#bi_and"><span class="id" title="projection">bi_and</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#type_proj_setoid_equality"><span class="id" title="section">type_proj_setoid_equality</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab108"></a><h2 class="section">Semantic proofs of typing lemmas for projections.</h2>

</div>
<div class="code">
<span class="id" title="keyword">Section</span> <a id="type_proj" class="idref" href="#type_proj"><span class="id" title="section">type_proj</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<a id="dlangG0:61" class="idref" href="#dlangG0:61"><span class="id" title="binder">!</span></a><a id="dlangG0:61" class="idref" href="#dlangG0:61"><span class="id" title="binder">dlangG</span></a> <a id="dlangG0:61" class="idref" href="#dlangG0:61"><span class="id" title="binder">Σ</span></a>}.<br/>

<br/>
</div>

<div class="doc">
    Existentials on a singleton coincide with path substitution:
    <span class="inlinecode">∃</span> <span class="inlinecode"><span class="id" title="var">x</span>:</span> <span class="inlinecode"><span class="id" title="var">p.type</span>.</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">T</span>[<span class="id" title="var">x</span>:=<span class="id" title="var">p</span>]</span>.
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="oExists_oSing" class="idref" href="#oExists_oSing"><span class="id" title="lemma">oExists_oSing</span></a> <a id="p:62" class="idref" href="#p:62"><span class="id" title="binder">p</span></a> (<a id="T:63" class="idref" href="#T:63"><span class="id" title="binder">T</span></a> : <a class="idref" href="D.Dot.lr.dot_lty.html#oltyO"><span class="id" title="abbreviation">oltyO</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#8fcbc1ab0f349ef4c45c40af9b7af874"><span class="id" title="variable">Σ</span></a> 0) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oExists"><span class="id" title="definition">oExists</span></a> (<a class="idref" href="D.Dot.lr.unary_lr.html#oSing"><span class="id" title="definition">oSing</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#p:62"><span class="id" title="variable">p</span></a>) <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:63"><span class="id" title="variable">T</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp/stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#opSubst"><span class="id" title="definition">opSubst</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#p:62"><span class="id" title="variable">p</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:63"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">args</span> ρ <span class="id" title="var">v</span>. <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="D.Dot.lr.path_wp.html#path_wp_eq"><span class="id" title="lemma">path_wp_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">properness</span>; <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="D.Dot.syn.lr_syn_aux.html#alias_paths_pv_eq_1"><span class="id" title="lemma">alias_paths_pv_eq_1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
    Projections from a singleton coincide with selections:
    <span class="inlinecode"><span class="id" title="var">p.type</span>#<span class="id" title="var">A</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">p.A</span></span>.
   
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="oProj_oSing" class="idref" href="#oProj_oSing"><span class="id" title="lemma">oProj_oSing</span></a> <a id="A:64" class="idref" href="#A:64"><span class="id" title="binder">A</span></a> <a id="p:65" class="idref" href="#p:65"><span class="id" title="binder">p</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:64"><span class="id" title="variable">A</span></a> (<a class="idref" href="D.Dot.lr.unary_lr.html#oSing"><span class="id" title="definition">oSing</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#p:65"><span class="id" title="variable">p</span></a>) <a class="idref" href="https://plv.mpi-sws.org/coqdoc/stdpp/stdpp.base.html#84ed560d885c4affec56d11a371728c0"><span class="id" title="notation">≡</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#oSel"><span class="id" title="abbreviation">oSel</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#p:65"><span class="id" title="variable">p</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:64"><span class="id" title="variable">A</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProjN_oExists"><span class="id" title="definition">oProjN_oExists</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oExists_oSing"><span class="id" title="lemma">oExists_oSing</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Reduce&nbsp;path&nbsp;substitution.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">move</span>⇒ <span class="id" title="var">args</span> ρ <span class="id" title="var">v</span> /=; <span class="id" title="var">f_equiv</span>⇒<span class="id" title="var">w</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="D.Dot.lr.path_wp.html#path_wp_pv_eq"><span class="id" title="lemma">path_wp_pv_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
TODO: other rules should be derivable from the rules for existentials. 
<div class="paragraph"> </div>

    Here and below, we use indexed subtyping <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:^<span class="id" title="var">i</span></span> <span class="inlinecode"><span class="id" title="var">U</span></span> to satisfy the
    restrictions discussed above. These restrictions are not specific to type
    projections but are also needed for type selections <span class="inlinecode"><span class="id" title="var">p.A</span></span>.

<div class="paragraph"> </div>

    On a first read, you should read <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:^<span class="id" title="var">i</span></span> <span class="inlinecode"><span class="id" title="var">U</span></span> as <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊢</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>; see the
    paper for more discussion.

<div class="paragraph"> </div>

    In short, to show a subtyping relation <span class="inlinecode"><span class="id" title="var">T1</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T2</span></span>, we must show that
    any value <span class="inlinecode"><a class="idref" href="D.Dot.examples.sem.no_russell_paradox.html#v"><span class="id" title="definition">v</span></a></span> in <span class="inlinecode"><span class="id" title="var">T1</span></span> is also in <span class="inlinecode"><span class="id" title="var">T2</span></span>.

<div class="paragraph"> </div>

    Because types can contain free variables, we have environments <span class="inlinecode">ρ</span>,
    typed by typing contexts <span class="inlinecode"><span class="id" title="var">Γ</span></span>, but you can ignore them at first.
  
<div class="paragraph"> </div>


<div class="paragraph"> </div>

    Type projections are covariant: if T &lt;: U then TA <: UA, or formally:

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:^<span class="id" title="var">i</span></span> <span class="inlinecode"><span class="id" title="var">U</span></span>
<hr/>

    <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode"><span class="id" title="var">T</span>#<span class="id" title="var">A</span></span> <span class="inlinecode">&lt;:^<span class="id" title="var">i</span></span> <span class="inlinecode"><span class="id" title="var">U</span>#<span class="id" title="var">A</span></span>
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sProj_Stp_Proj" class="idref" href="#sProj_Stp_Proj"><span class="id" title="lemma">sProj_Stp_Proj</span></a> <a id="A:66" class="idref" href="#A:66"><span class="id" title="binder">A</span></a> <a id="9cd1870a4a886601ca6d9db2f5bb0b92" class="idref" href="#9cd1870a4a886601ca6d9db2f5bb0b92"><span class="id" title="binder">Γ</span></a> <a id="T:68" class="idref" href="#T:68"><span class="id" title="binder">T</span></a> <a id="U:69" class="idref" href="#U:69"><span class="id" title="binder">U</span></a> <a id="i:70" class="idref" href="#i:70"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#9cd1870a4a886601ca6d9db2f5bb0b92"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:68"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:70"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:69"><span class="id" title="variable">U</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#9cd1870a4a886601ca6d9db2f5bb0b92"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:66"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:68"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:70"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:66"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:69"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "&gt;#Hsub !&gt; %ρ Hg %v"; <span class="id" title="var">iSpecialize</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hsub" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hg"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>; <span class="id" title="var">iNext</span> <span class="id" title="var">i</span>.<br/>
</div>

<div class="doc">
      From <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span></span> we must show <span class="inlinecode"><span class="id" title="var">T</span>#<span class="id" title="var">A</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span>#<span class="id" title="var">A</span></span>, that is, that any <span class="inlinecode"><a class="idref" href="D.Dot.examples.sem.no_russell_paradox.html#v"><span class="id" title="definition">v</span></a></span> in <span class="inlinecode"><span class="id" title="var">T</span>#<span class="id" title="var">A</span></span>
      is in <span class="inlinecode"><span class="id" title="var">U</span>#<span class="id" title="var">A</span></span>. Recall the definition of <span class="inlinecode"><span class="id" title="var">T</span>#<span class="id" title="var">A</span></span>:

<div class="paragraph"> </div>

        <span class="inlinecode"><span class="id" title="var">V</span>[[<span class="id" title="var">T</span>#<span class="id" title="var">A</span>]](ρ)</span> <span class="inlinecode">=</span> <span class="inlinecode">{</span> <span class="inlinecode"><a class="idref" href="D.Dot.examples.sem.no_russell_paradox.html#v"><span class="id" title="definition">v</span></a></span> <span class="inlinecode">|</span> <span class="inlinecode">∃</span> <span class="inlinecode"><span class="id" title="var">w</span></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">V</span>[[<span class="id" title="var">T</span>]](ρ).</span> <span class="inlinecode"><a class="idref" href="D.Dot.examples.sem.no_russell_paradox.html#v"><span class="id" title="definition">v</span></a></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">V</span>[[<span class="id" title="var">w.A</span>]](ρ)</span> <span class="inlinecode">}</span>.

<div class="paragraph"> </div>

      So assume <span class="inlinecode"><a class="idref" href="D.Dot.examples.sem.no_russell_paradox.html#v"><span class="id" title="definition">v</span></a></span> is in <span class="inlinecode"><span class="id" title="var">T</span>#<span class="id" title="var">A</span></span>; then there exists a <span class="inlinecode"><span class="id" title="var">w</span></span> in <span class="inlinecode"><span class="id" title="var">T</span></span> such that <span class="inlinecode"><a class="idref" href="D.Dot.examples.sem.no_russell_paradox.html#v"><span class="id" title="definition">v</span></a></span>
      is in <span class="inlinecode"><span class="id" title="var">w.A</span></span>. But then <span class="inlinecode"><span class="id" title="var">w</span></span> is in <span class="inlinecode"><span class="id" title="var">U</span></span>, because <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">U</span></span>.
      So we have <span class="inlinecode"><span class="id" title="var">w</span></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">U</span></span> and <span class="inlinecode"><a class="idref" href="D.Dot.examples.sem.no_russell_paradox.html#v"><span class="id" title="definition">v</span></a></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">w.A</span></span>, that is, <span class="inlinecode"><a class="idref" href="D.Dot.examples.sem.no_russell_paradox.html#v"><span class="id" title="definition">v</span></a></span> <span class="inlinecode">∈</span> <span class="inlinecode"><span class="id" title="var">U</span>#<span class="id" title="var">A</span></span>.
    
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProjN_eq"><span class="id" title="lemma">oProjN_eq</span></a>. <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">w</span>) "(HTw &amp; Hφ)"; <span class="id" title="var">iExists</span> <span class="id" title="var">w</span>; <span class="id" title="var">iFrame</span> "Hφ".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a>"Hsub" <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HTw"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
    Type projections are subtypes of their upper bound.
<hr/>

    <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode">{</span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><a class="idref" href="D.iris_extra.det_reduction.html#L"><span class="id" title="module">L</span></a></span> <span class="inlinecode">..</span> <span class="inlinecode"><span class="id" title="var">U</span></span> <span class="inlinecode">}<span class="id" title="var">T</span>#<span class="id" title="var">A</span></span> <span class="inlinecode">&lt;:^<span class="id" title="var">i</span></span> <span class="inlinecode"><span class="id" title="var">U</span></span>
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sProj_Stp_U" class="idref" href="#sProj_Stp_U"><span class="id" title="lemma">sProj_Stp_U</span></a> <a id="A:71" class="idref" href="#A:71"><span class="id" title="binder">A</span></a> <a id="28ac53edcd2fde0ab8b47fec9231c80a" class="idref" href="#28ac53edcd2fde0ab8b47fec9231c80a"><span class="id" title="binder">Γ</span></a> <a id="L:73" class="idref" href="#L:73"><span class="id" title="binder">L</span></a> <a id="U:74" class="idref" href="#U:74"><span class="id" title="binder">U</span></a> <a id="i:75" class="idref" href="#i:75"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#28ac53edcd2fde0ab8b47fec9231c80a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:71"><span class="id" title="variable">A</span></a> (<a class="idref" href="D.Dot.lr.unary_lr.html#oTMem"><span class="id" title="abbreviation">oTMem</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:71"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#L:73"><span class="id" title="variable">L</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:74"><span class="id" title="variable">U</span></a>) <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:75"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:74"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; %ρ Hg %v"; <span class="id" title="var">iNext</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProjN_eq"><span class="id" title="lemma">oProjN_eq</span></a>; <span class="id" title="var">iDestruct</span> 1 <span class="id" title="keyword">as</span> (<span class="id" title="var">w</span>) "(HTw &amp; HselV)".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;After&nbsp;unfolding&nbsp;definitions,&nbsp;we&nbsp;must&nbsp;show&nbsp;that&nbsp;<span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;is&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">U</span></span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assuming&nbsp;that&nbsp;<span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;is&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">w.A</span></span>&nbsp;where&nbsp;<span class="inlinecode"><span class="id" title="var">w</span></span>&nbsp;is&nbsp;in&nbsp;<span class="inlinecode">{</span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">L</span></span> <span class="inlinecode">..</span> <span class="inlinecode"><span class="id" title="var">U</span></span> <span class="inlinecode">}</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;From&nbsp;existing&nbsp;results&nbsp;for&nbsp;type&nbsp;selections,&nbsp;it&nbsp;follows&nbsp;that<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;is&nbsp;in&nbsp;<span class="inlinecode"><span class="id" title="var">U</span></span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#vl_sel_ub"><span class="id" title="lemma">vl_sel_ub</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HselV HTw"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
    Type projections are subtypes of their upper bound: a more general statement.

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:^<span class="id" title="var">i</span></span> <span class="inlinecode">{</span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><a class="idref" href="D.iris_extra.det_reduction.html#L"><span class="id" title="module">L</span></a></span> <span class="inlinecode">..</span> <span class="inlinecode"><span class="id" title="var">U</span></span> <span class="inlinecode">}</span>
<hr/>

    <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode"><span class="id" title="var">T</span>#<span class="id" title="var">A</span></span> <span class="inlinecode">&lt;:^<span class="id" title="var">i</span></span> <span class="inlinecode"><span class="id" title="var">U</span></span>
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sProj_Stp_U'" class="idref" href="#sProj_Stp_U'"><span class="id" title="lemma">sProj_Stp_U'</span></a> <a id="A:76" class="idref" href="#A:76"><span class="id" title="binder">A</span></a> <a id="6e1b0d30b2bbad08194ab9a2257ab851" class="idref" href="#6e1b0d30b2bbad08194ab9a2257ab851"><span class="id" title="binder">Γ</span></a> <a id="T:78" class="idref" href="#T:78"><span class="id" title="binder">T</span></a> <a id="L:79" class="idref" href="#L:79"><span class="id" title="binder">L</span></a> <a id="U:80" class="idref" href="#U:80"><span class="id" title="binder">U</span></a> <a id="i:81" class="idref" href="#i:81"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#6e1b0d30b2bbad08194ab9a2257ab851"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:78"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:81"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#oTMem"><span class="id" title="abbreviation">oTMem</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:76"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#L:79"><span class="id" title="variable">L</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:80"><span class="id" title="variable">U</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#6e1b0d30b2bbad08194ab9a2257ab851"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:76"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:78"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:81"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:80"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="D.Dot.semtyp_lemmas.dsub_lr.html#sStp_Trans"><span class="id" title="lemma">sStp_Trans</span></a>; <span class="id" title="tactic">first</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#sProj_Stp_Proj"><span class="id" title="lemma">sProj_Stp_Proj</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#sProj_Stp_U"><span class="id" title="lemma">sProj_Stp_U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
    Projections <span class="inlinecode"><span class="id" title="var">T</span>#<span class="id" title="var">A</span></span> are lower bounded by type selections <span class="inlinecode"><span class="id" title="var">p.A</span></span>:

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:^<span class="id" title="var">i</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span>
<hr/>

    <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode"><span class="id" title="var">p.A</span></span> <span class="inlinecode">&lt;:^<span class="id" title="var">i</span></span> <span class="inlinecode"><span class="id" title="var">T</span>#<span class="id" title="var">A</span></span>
  
<div class="paragraph"> </div>

    Derive this rule from the above ones: rewrite the selection as a
    projection from a singleton type, then use covariance of projections, and
    finally use <span class="inlinecode"><a class="idref" href="D.Dot.semtyp_lemmas.path_repl_lr.html#sSngl_Stp_Self"><span class="id" title="lemma">sSngl_Stp_Self</span></a></span> to show that <span class="inlinecode"><span class="id" title="var">p.type</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span></span>.
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sSel_Stp_Proj" class="idref" href="#sSel_Stp_Proj"><span class="id" title="lemma">sSel_Stp_Proj</span></a> <a id="A:82" class="idref" href="#A:82"><span class="id" title="binder">A</span></a> <a id="7f0b6c4481d58aa56d12a792961f7b07" class="idref" href="#7f0b6c4481d58aa56d12a792961f7b07"><span class="id" title="binder">Γ</span></a> <a id="T:84" class="idref" href="#T:84"><span class="id" title="binder">T</span></a> <a id="i:85" class="idref" href="#i:85"><span class="id" title="binder">i</span></a> <a id="p:86" class="idref" href="#p:86"><span class="id" title="binder">p</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#7f0b6c4481d58aa56d12a792961f7b07"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">⊨</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">p</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#p:86"><span class="id" title="variable">p</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">:</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:84"><span class="id" title="variable">T</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">,</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:85"><span class="id" title="variable">i</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#7f0b6c4481d58aa56d12a792961f7b07"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#oSel"><span class="id" title="abbreviation">oSel</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#p:86"><span class="id" title="variable">p</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:82"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:85"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:82"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:84"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#Hp". <span class="id" title="tactic">rewrite</span> -<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj_oSing"><span class="id" title="lemma">oProj_oSing</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#sProj_Stp_Proj"><span class="id" title="lemma">sProj_Stp_Proj</span></a>. <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.semtyp_lemmas.path_repl_lr.html#sSngl_Stp_Self"><span class="id" title="lemma">sSngl_Stp_Self</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
    Combining the two above rules for projections with the existing system,
    we even get lower bounds for projections from inhabited types:

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:^<span class="id" title="var">i</span></span> <span class="inlinecode">{</span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><a class="idref" href="D.iris_extra.det_reduction.html#L"><span class="id" title="module">L</span></a></span> <span class="inlinecode">..</span> <span class="inlinecode"><span class="id" title="var">U</span></span> <span class="inlinecode">}</span>
    <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:^<span class="id" title="var">i</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span>
<hr/>

    <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode"><a class="idref" href="D.iris_extra.det_reduction.html#L"><span class="id" title="module">L</span></a></span> <span class="inlinecode">&lt;:^<span class="id" title="var">i</span></span> <span class="inlinecode"><span class="id" title="var">T</span>#<span class="id" title="var">A</span></span>

<div class="paragraph"> </div>

    But this is <i>not</i> the Scala 2 lower-bound rule (which doesn't require <span class="inlinecode"><span class="id" title="var">p</span></span>
    to exist), and it is not directly usable for a typechecker.
    The only typing rule we can use in Scala is
    <span class="inlinecode"><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#sSel_Stp_Proj"><span class="id" title="lemma">sSel_Stp_Proj</span></a></span>, and to use that the user needs to get a value of type
    <span class="inlinecode"><span class="id" title="var">p.A</span></span> in the usual, safe way:
    if <span class="inlinecode"><span class="id" title="var">e</span></span> has type <span class="inlinecode"><a class="idref" href="D.iris_extra.det_reduction.html#L"><span class="id" title="module">L</span></a></span>, then <span class="inlinecode"><span class="id" title="var">e</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">p.A</span></span> has types <span class="inlinecode"><span class="id" title="var">p.A</span></span> and <span class="inlinecode"><span class="id" title="var">T</span>#<span class="id" title="var">A</span></span>.

<div class="paragraph"> </div>

    However, a typechecker might relax this restriction if it can prove <span class="inlinecode"><span class="id" title="var">T</span></span>
    has an inhabiting path (that is, that it is realizable, in the sense
    used in Dotty), even if the value has not been constructed.

<div class="paragraph"> </div>

    Such reasoning is needed to enable compiling:
    <span class="inlinecode"><span class="id" title="var">trait</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">{</span> <span class="inlinecode"><span class="id" title="keyword">type</span></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">Int</span></span> <span class="inlinecode">};</span> <span class="inlinecode"><span class="id" title="var">def</span></span> <span class="inlinecode"><span class="id" title="var">f</span>(<span class="id" title="var">x</span>:</span> <span class="inlinecode"><span class="id" title="var">Int</span>):</span> <span class="inlinecode"><span class="id" title="var">T</span>#<span class="id" title="var">A</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">x</span></span>.

<div class="paragraph"> </div>

    The value can even use assumptions in the typing context (which might be
    more liberal than the Dotty rules); as usual, code in absurd typing
    contexts cannot run.
  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sProj_Stp_L" class="idref" href="#sProj_Stp_L"><span class="id" title="lemma">sProj_Stp_L</span></a> <a id="A:87" class="idref" href="#A:87"><span class="id" title="binder">A</span></a> <a id="97663af12d008dfc98f7e61dde21ee75" class="idref" href="#97663af12d008dfc98f7e61dde21ee75"><span class="id" title="binder">Γ</span></a> <a id="T:89" class="idref" href="#T:89"><span class="id" title="binder">T</span></a> <a id="L:90" class="idref" href="#L:90"><span class="id" title="binder">L</span></a> <a id="U:91" class="idref" href="#U:91"><span class="id" title="binder">U</span></a> <a id="i:92" class="idref" href="#i:92"><span class="id" title="binder">i</span></a> <a id="p:93" class="idref" href="#p:93"><span class="id" title="binder">p</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#97663af12d008dfc98f7e61dde21ee75"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:89"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:92"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#oTMem"><span class="id" title="abbreviation">oTMem</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:87"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#L:90"><span class="id" title="variable">L</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:91"><span class="id" title="variable">U</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#97663af12d008dfc98f7e61dde21ee75"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">⊨</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">p</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#p:93"><span class="id" title="variable">p</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">:</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:89"><span class="id" title="variable">T</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">,</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:92"><span class="id" title="variable">i</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#97663af12d008dfc98f7e61dde21ee75"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#L:90"><span class="id" title="variable">L</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:92"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:87"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:89"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#Hsub #Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="D.Dot.semtyp_lemmas.dsub_lr.html#sStp_Trans"><span class="id" title="lemma">sStp_Trans</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#sSel_Stp_Proj"><span class="id" title="lemma">sSel_Stp_Proj</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="D.Dot.semtyp_lemmas.dsub_lr.html#sStp_Sel"><span class="id" title="lemma">sStp_Sel</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.semtyp_lemmas.path_repl_lr.html#sP_Sub"><span class="id" title="lemma">sP_Sub</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hp Hsub"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
In fact, if <span class="inlinecode"><span class="id" title="var">p</span></span> has more specific bounds, we can use those too. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sProj_Stp_L_Gen" class="idref" href="#sProj_Stp_L_Gen"><span class="id" title="lemma">sProj_Stp_L_Gen</span></a> <a id="A:94" class="idref" href="#A:94"><span class="id" title="binder">A</span></a> <a id="06710cf7ff350dd6f4d45fa84c1b2754" class="idref" href="#06710cf7ff350dd6f4d45fa84c1b2754"><span class="id" title="binder">Γ</span></a> <a id="T1:96" class="idref" href="#T1:96"><span class="id" title="binder">T1</span></a> <a id="T2:97" class="idref" href="#T2:97"><span class="id" title="binder">T2</span></a> <a id="L:98" class="idref" href="#L:98"><span class="id" title="binder">L</span></a> <a id="U:99" class="idref" href="#U:99"><span class="id" title="binder">U</span></a> <a id="i:100" class="idref" href="#i:100"><span class="id" title="binder">i</span></a> <a id="p:101" class="idref" href="#p:101"><span class="id" title="binder">p</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#06710cf7ff350dd6f4d45fa84c1b2754"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T2:97"><span class="id" title="variable">T2</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:100"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#oTMem"><span class="id" title="abbreviation">oTMem</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:94"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#L:98"><span class="id" title="variable">L</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:99"><span class="id" title="variable">U</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#06710cf7ff350dd6f4d45fa84c1b2754"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T2:97"><span class="id" title="variable">T2</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:100"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T1:96"><span class="id" title="variable">T1</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#06710cf7ff350dd6f4d45fa84c1b2754"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">⊨</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">p</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#p:101"><span class="id" title="variable">p</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">:</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T2:97"><span class="id" title="variable">T2</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">,</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:100"><span class="id" title="variable">i</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#06710cf7ff350dd6f4d45fa84c1b2754"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#L:98"><span class="id" title="variable">L</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:100"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:94"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T1:96"><span class="id" title="variable">T1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#HsubBounds #Hsub #HpT2".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iDestruct</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.semtyp_lemmas.path_repl_lr.html#sP_Sub"><span class="id" title="lemma">sP_Sub</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HpT2 Hsub"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "HpT1".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="D.Dot.semtyp_lemmas.dsub_lr.html#sStp_Trans"><span class="id" title="lemma">sStp_Trans</span></a>; <span class="id" title="var">last</span> <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#sSel_Stp_Proj"><span class="id" title="lemma">sSel_Stp_Proj</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HpT1"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="D.Dot.semtyp_lemmas.dsub_lr.html#sStp_Sel"><span class="id" title="lemma">sStp_Sel</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.semtyp_lemmas.path_repl_lr.html#sP_Sub"><span class="id" title="lemma">sP_Sub</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HpT2 HsubBounds"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
And <span class="inlinecode"><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#sProj_Stp_L"><span class="id" title="lemma">sProj_Stp_L</span></a></span> is indeed a special case of <span class="inlinecode"><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#sProj_Stp_L_Gen"><span class="id" title="lemma">sProj_Stp_L_Gen</span></a></span>. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sProj_Stp_L'" class="idref" href="#sProj_Stp_L'"><span class="id" title="lemma">sProj_Stp_L'</span></a> <a id="A:102" class="idref" href="#A:102"><span class="id" title="binder">A</span></a> <a id="0e1bf0b524e757fdeece72811bdc1c94" class="idref" href="#0e1bf0b524e757fdeece72811bdc1c94"><span class="id" title="binder">Γ</span></a> <a id="T:104" class="idref" href="#T:104"><span class="id" title="binder">T</span></a> <a id="L:105" class="idref" href="#L:105"><span class="id" title="binder">L</span></a> <a id="U:106" class="idref" href="#U:106"><span class="id" title="binder">U</span></a> <a id="i:107" class="idref" href="#i:107"><span class="id" title="binder">i</span></a> <a id="p:108" class="idref" href="#p:108"><span class="id" title="binder">p</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#0e1bf0b524e757fdeece72811bdc1c94"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:104"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:107"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#oTMem"><span class="id" title="abbreviation">oTMem</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:102"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#L:105"><span class="id" title="variable">L</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#U:106"><span class="id" title="variable">U</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#0e1bf0b524e757fdeece72811bdc1c94"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">⊨</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">p</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#p:108"><span class="id" title="variable">p</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">:</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:104"><span class="id" title="variable">T</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">,</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:107"><span class="id" title="variable">i</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#6e96398fec71e244af9dd75e40876ca6"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#0e1bf0b524e757fdeece72811bdc1c94"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#L:105"><span class="id" title="variable">L</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:107"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:102"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:104"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#Hsub #Hp".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#sProj_Stp_L_Gen"><span class="id" title="lemma">sProj_Stp_L_Gen</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hsub [] Hp"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="D.Dot.semtyp_lemmas.dsub_lr.html#sStp_Refl"><span class="id" title="lemma">sStp_Refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
    TODO: Scala probably has more typing rules.
    Check them, or provide counterexamples.
  
<div class="paragraph"> </div>

<a id="lab109"></a><h2 class="section">Rules for projecting members with matching bounds.</h2>

<div class="paragraph"> </div>

 Upper bounds are easy... 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sProj_TMem_Stp" class="idref" href="#sProj_TMem_Stp"><span class="id" title="lemma">sProj_TMem_Stp</span></a> <a id="20b0d4460e63a61e2b7612cbaab47a2a" class="idref" href="#20b0d4460e63a61e2b7612cbaab47a2a"><span class="id" title="binder">Γ</span></a> <a id="A:110" class="idref" href="#A:110"><span class="id" title="binder">A</span></a> <a id="T:111" class="idref" href="#T:111"><span class="id" title="binder">T</span></a> <a id="i:112" class="idref" href="#i:112"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#20b0d4460e63a61e2b7612cbaab47a2a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:110"><span class="id" title="variable">A</span></a> (<a class="idref" href="D.Dot.lr.unary_lr.html#oTMem"><span class="id" title="abbreviation">oTMem</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:110"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:111"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:111"><span class="id" title="variable">T</span></a>) <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:112"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:111"><span class="id" title="variable">T</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#sProj_Stp_U"><span class="id" title="lemma">sProj_Stp_U</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
    For lower bounds, we'd expect a rule similar to:
      <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:^<span class="id" title="var">i</span></span> <span class="inlinecode">{</span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">..</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">}</span>
    However, we must first of all "guard" it with ▷, like other gDOT rules
    involving (g)DOT's impredicative type members; that would give:

<div class="paragraph"> </div>

      <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode">⊨</span> <span class="inlinecode">▷</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:^<span class="id" title="var">i</span></span> <span class="inlinecode">{</span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">&gt;:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">}</span>

<div class="paragraph"> </div>

      where <span class="inlinecode">{</span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">&gt;:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">}</span> means <span class="inlinecode">{</span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">::</span> <span class="inlinecode">▷</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">..</span> <span class="inlinecode">▷</span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">}</span>.

<div class="paragraph"> </div>

      In our notation, that's written:

<div class="paragraph"> </div>

      <span class="inlinecode"><span class="id" title="var">Γ</span></span> <span class="inlinecode"><span class="id" title="var">s</span>⊨</span> <span class="inlinecode"><a class="idref" href="D.iris_extra.lty.html#Lty.oLater"><span class="id" title="abbreviation">oLater</span></a></span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode">&lt;:[<span class="id" title="var">i</span>]</span> <span class="inlinecode"><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">(<a class="idref" href="D.Dot.lr.unary_lr.html#oTMemL"><span class="id" title="abbreviation">oTMemL</span></a></span> <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode"><span class="id" title="var">T</span></span> <span class="inlinecode"><span class="id" title="var">T</span>)</span>.

<div class="paragraph"> </div>

    That rule indeed holds, but was challenging to prove, because this rule
    involves a type definition that doesn't appear in the source program, and
    the setup described in our ICFP'20 paper does not support such type
    definitions for technical reasons. Luckily, we only needed to tweak our
    model a bit, preserving all results.

<div class="paragraph"> </div>

    Technically, in Iris jargon, to enable this proof we prepended a basic
    update modality (<span class="inlinecode">|==&gt;</span>) to the definitions of all semantic judgments, to
    allow using <span class="inlinecode"><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj_oTMem"><span class="id" title="lemma">oProj_oTMem</span></a></span> despite its own update modality.
    Luckily, it was easy enough to update the proofs for these changes in
    definitions; see:
    <a href="https://github.com/Blaisorblade/dot-iris/pull/303">
    https://github.com/Blaisorblade/dot-iris/pull/303</a>
    .
  
<div class="paragraph"> </div>

<a id="lab110"></a><h3 class="section">Auxiliary lemma.</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="oProj_oTMem" class="idref" href="#oProj_oTMem"><span class="id" title="lemma">oProj_oTMem</span></a> <a id="A:113" class="idref" href="#A:113"><span class="id" title="binder">A</span></a> (<a id="T:114" class="idref" href="#T:114"><span class="id" title="binder">T</span></a> : <a class="idref" href="D.Dot.lr.dot_lty.html#olty"><span class="id" title="definition">olty</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#8fcbc1ab0f349ef4c45c40af9b7af874"><span class="id" title="variable">Σ</span></a> 0) <a id="30194486bb6c4e804d25f7da04abfdab" class="idref" href="#30194486bb6c4e804d25f7da04abfdab"><span class="id" title="binder">σ</span></a> <a id="s:116" class="idref" href="#s:116"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#s:116"><span class="id" title="variable">s</span></a> <a class="idref" href="D.iris_extra.dlang.html#3bd9605fdd2aa701222b58ebd70098c9"><span class="id" title="notation">↝[</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#30194486bb6c4e804d25f7da04abfdab"><span class="id" title="variable">σ</span></a> <a class="idref" href="D.iris_extra.dlang.html#3bd9605fdd2aa701222b58ebd70098c9"><span class="id" title="notation">]</span></a> <a class="idref" href="D.prelude.html#shift"><span class="id" title="abbreviation">shift</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:114"><span class="id" title="variable">T</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#0f70793a7efc24c230ef5e3a6ac95b68"><span class="id" title="notation">-∗</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.updates.html#be9a2343da4fe37e3ed47c88e1c47b1e"><span class="id" title="notation">|==&gt;</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">∀</span></a> <a id="0feb2b71024bbe276f7aa91d8488aef3" class="idref" href="#0feb2b71024bbe276f7aa91d8488aef3"><span class="id" title="binder">ρ</span></a><a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#3737660a6294eb9f7af6df17be5eb5a3"><span class="id" title="notation">,</span></a> <a class="idref" href="D.Dot.lr.dot_lty.html#oLater"><span class="id" title="abbreviation">oLater</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:114"><span class="id" title="variable">T</span></a> <a class="idref" href="D.iris_extra.saved_interp_dep.html#anil"><span class="id" title="abbreviation">anil</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#0feb2b71024bbe276f7aa91d8488aef3"><span class="id" title="variable">ρ</span></a> <a class="idref" href="D.iris_extra.lty.html#be84dbd0f1efe44e804868824b94396d"><span class="id" title="notation">⊆</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:113"><span class="id" title="variable">A</span></a> (<a class="idref" href="D.Dot.lr.unary_lr.html#oTMemL"><span class="id" title="abbreviation">oTMemL</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:113"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:114"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:114"><span class="id" title="variable">T</span></a>) <a class="idref" href="D.iris_extra.saved_interp_dep.html#anil"><span class="id" title="abbreviation">anil</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#0feb2b71024bbe276f7aa91d8488aef3"><span class="id" title="variable">ρ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
</div>

<div class="doc">
To prove this theorem, we create an auxiliary definition body <span class="inlinecode"><span class="id" title="var">auxD</span></span>
    and an auxiliary object <span class="inlinecode"><span class="id" title="var">auxV</span></span>, whose type member <span class="inlinecode"><span class="id" title="var">A</span></span> points to <span class="inlinecode"><a class="idref" href="D.prelude.html#shift"><span class="id" title="abbreviation">shift</span></a></span> <span class="inlinecode"><span class="id" title="var">T</span></span>. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "#Hs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">auxD</span> := <a class="idref" href="D.Dot.syn.syn.html#VlSorts.dtysem"><span class="id" title="constructor">dtysem</span></a> σ <span class="id" title="var">s</span>; <span class="id" title="tactic">set</span> <span class="id" title="var">auxV</span> := (<a class="idref" href="D.Dot.syn.syn.html#VlSorts.vobj"><span class="id" title="constructor">vobj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">auxD</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">⊨</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">p</span></a> <a class="idref" href="D.Dot.syn.syn.html#VlSorts.pv"><span class="id" title="constructor">pv</span></a> (<a class="idref" href="D.Dot.syn.syn.html#VlSorts.vobj"><span class="id" title="constructor">vobj</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">A</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">auxD</span><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">:</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.lr.dot_lty.html#oMu"><span class="id" title="definition">oMu</span></a> (<a class="idref" href="D.Dot.lr.unary_lr.html#oTMemL"><span class="id" title="abbreviation">oTMemL</span></a> <span class="id" title="var">A</span> (<a class="idref" href="D.prelude.html#shift"><span class="id" title="abbreviation">shift</span></a> <span class="id" title="var">T</span>) (<a class="idref" href="D.prelude.html#shift"><span class="id" title="abbreviation">shift</span></a> <span class="id" title="var">T</span>))<a class="idref" href="D.Dot.lr.unary_lr.html#26ce2c5963808781968e75979f161176"><span class="id" title="notation">,</span></a> 0) <span class="id" title="keyword">as</span> "&gt;#HwT".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> <a class="idref" href="D.Dot.semtyp_lemmas.defs_lr.html#sP_Obj_I"><span class="id" title="lemma">sP_Obj_I</span></a>; <span class="id" title="var">iApply</span> <a class="idref" href="D.Dot.semtyp_lemmas.defs_lr.html#sD_Sing'"><span class="id" title="lemma">sD_Sing'</span></a>; <span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.semtyp_lemmas.defs_lr.html#sD_Typ"><span class="id" title="lemma">sD_Typ</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; %ρ %v #HT"; <span class="id" title="tactic">rewrite</span> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProjN_eq"><span class="id" title="lemma">oProjN_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iAssert</span> (<a class="idref" href="D.Dot.lr.unary_lr.html#oTMemL"><span class="id" title="abbreviation">oTMemL</span></a> <span class="id" title="var">A</span> <span class="id" title="var">T</span> <span class="id" title="var">T</span> <a class="idref" href="D.iris_extra.saved_interp_dep.html#anil"><span class="id" title="abbreviation">anil</span></a> ρ <span class="id" title="var">auxV</span><a class="idref" href="https://www.ps.uni-saarland.de/autosubst/doc/Autosubst.Autosubst_Classes.html#23c9824843d8074d89ce0ae22df540a6"><span class="id" title="notation">.[</span></a>ρ<a class="idref" href="https://www.ps.uni-saarland.de/autosubst/doc/Autosubst.Autosubst_Classes.html#23c9824843d8074d89ce0ae22df540a6"><span class="id" title="notation">]</span></a>)%<span class="id" title="var">I</span> <span class="id" title="keyword">as</span> "{HwT} #Hw". {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="D.Dot.lr.path_wp.html#path_wp_pv_eq"><span class="id" title="lemma">path_wp_pv_eq</span></a> <span class="id" title="var">auxV</span><a class="idref" href="https://www.ps.uni-saarland.de/autosubst/doc/Autosubst.Autosubst_Classes.html#23c9824843d8074d89ce0ae22df540a6"><span class="id" title="notation">.[</span></a>ρ<a class="idref" href="https://www.ps.uni-saarland.de/autosubst/doc/Autosubst.Autosubst_Classes.html#23c9824843d8074d89ce0ae22df540a6"><span class="id" title="notation">]</span></a>). <span class="id" title="tactic">by</span> <span class="id" title="var">iApply</span> "HwT".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iExists</span> <span class="id" title="var">auxV</span><a class="idref" href="https://www.ps.uni-saarland.de/autosubst/doc/Autosubst.Autosubst_Classes.html#23c9824843d8074d89ce0ae22df540a6"><span class="id" title="notation">.[</span></a>ρ<a class="idref" href="https://www.ps.uni-saarland.de/autosubst/doc/Autosubst.Autosubst_Classes.html#23c9824843d8074d89ce0ae22df540a6"><span class="id" title="notation">]</span></a>; <span class="id" title="var">iFrame</span> "Hw".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iApply</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#vl_sel_lb"><span class="id" title="lemma">vl_sel_lb</span></a> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "HT Hw"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="sProj_Stp_TMem" class="idref" href="#sProj_Stp_TMem"><span class="id" title="lemma">sProj_Stp_TMem</span></a> {<a id="c614fd7f344488246e27443cc0ae1c43" class="idref" href="#c614fd7f344488246e27443cc0ae1c43"><span class="id" title="binder">Γ</span></a> <a id="i:119" class="idref" href="#i:119"><span class="id" title="binder">i</span></a> <a id="A:120" class="idref" href="#A:120"><span class="id" title="binder">A</span></a> <a id="6954d5c2e51d8ac5bcf7341b9ce1d94f" class="idref" href="#6954d5c2e51d8ac5bcf7341b9ce1d94f"><span class="id" title="binder">σ</span></a>} {<a id="T:122" class="idref" href="#T:122"><span class="id" title="binder">T</span></a> : <a class="idref" href="D.Dot.lr.dot_lty.html#olty"><span class="id" title="definition">olty</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#8fcbc1ab0f349ef4c45c40af9b7af874"><span class="id" title="variable">Σ</span></a> 0} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="D.Dot.lr.sem_unstamped_typing.html#ebcabd7192b4e710a5a38d95e92e65d4"><span class="id" title="definition">covering</span></a><a class="idref" href="D.Dot.lr.sem_unstamped_typing.html#ebcabd7192b4e710a5a38d95e92e65d4"><span class="id" title="definition">σ</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#6954d5c2e51d8ac5bcf7341b9ce1d94f"><span class="id" title="variable">σ</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:122"><span class="id" title="variable">T</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.13.0/stdlib//Coq.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#c614fd7f344488246e27443cc0ae1c43"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.lr.dot_lty.html#oLater"><span class="id" title="abbreviation">oLater</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:122"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:119"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:120"><span class="id" title="variable">A</span></a> (<a class="idref" href="D.Dot.lr.unary_lr.html#oTMemL"><span class="id" title="abbreviation">oTMemL</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:120"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:122"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:122"><span class="id" title="variable">T</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HclT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> (<a class="idref" href="D.Dot.lr.sem_unstamped_typing.html#leadsto_envD_equiv_alloc_shift"><span class="id" title="lemma">leadsto_envD_equiv_alloc_shift</span></a> <span class="id" title="var">HclT</span>) <span class="id" title="keyword">as</span> (<span class="id" title="var">s</span>) "Hs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iMod</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">(</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj_oTMem"><span class="id" title="lemma">oProj_oTMem</span></a> <span class="id" title="var">A</span> <a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">with</span></a> "Hs"<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.proofmode.ltac_tactics.html#c65a9d4b357f2165cc71fe44c81db669"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> "#Hs".<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">iIntros</span> "!&gt; %ρ _ !&gt;". <span class="id" title="var">iApply</span> "Hs".<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="Proj_Stp_TMem" class="idref" href="#Proj_Stp_TMem"><span class="id" title="lemma">Proj_Stp_TMem</span></a> {<a id="2c5c8f050a64470a889c3f533c77e693" class="idref" href="#2c5c8f050a64470a889c3f533c77e693"><span class="id" title="binder">Γ</span></a> <a id="i:124" class="idref" href="#i:124"><span class="id" title="binder">i</span></a> <a id="A:125" class="idref" href="#A:125"><span class="id" title="binder">A</span></a> <a id="n:126" class="idref" href="#n:126"><span class="id" title="binder">n</span></a>} {<a id="T:127" class="idref" href="#T:127"><span class="id" title="binder">T</span></a> : <a class="idref" href="D.Dot.syn.syn.html#VlSorts.ty"><span class="id" title="inductive">ty</span></a>} (<a id="HclT:128" class="idref" href="#HclT:128"><span class="id" title="binder">HclT</span></a> : <a class="idref" href="D.Dot.syn.syn.html#VlSorts.nclosed"><span class="id" title="definition">nclosed</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:127"><span class="id" title="variable">T</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#n:126"><span class="id" title="variable">n</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://plv.mpi-sws.org/coqdoc/iris/iris.bi.interface.html#b7d65d242d889c3e37aca6013a51bfad"><span class="id" title="notation">⊢</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#2c5c8f050a64470a889c3f533c77e693"><span class="id" title="variable">Γ</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">s</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">⊨</span></a> <a class="idref" href="D.Dot.lr.dot_lty.html#oLater"><span class="id" title="abbreviation">oLater</span></a> <a class="idref" href="D.Dot.lr.dot_lty.html#53036324c9eb2f6e31c056b7dfa11c32"><span class="id" title="notation">V</span></a><a class="idref" href="D.Dot.lr.dot_lty.html#53036324c9eb2f6e31c056b7dfa11c32"><span class="id" title="notation">⟦</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:127"><span class="id" title="variable">T</span></a><a class="idref" href="D.Dot.lr.dot_lty.html#53036324c9eb2f6e31c056b7dfa11c32"><span class="id" title="notation">⟧</span></a> <a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">&lt;:[</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#i:124"><span class="id" title="variable">i</span></a><a class="idref" href="D.Dot.lr.unary_lr.html#8b97c496898748a162d9fc47a660cd89"><span class="id" title="notation">]</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#oProj"><span class="id" title="abbreviation">oProj</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:125"><span class="id" title="variable">A</span></a> (<a class="idref" href="D.Dot.lr.unary_lr.html#oTMemL"><span class="id" title="abbreviation">oTMemL</span></a> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#A:125"><span class="id" title="variable">A</span></a> <a class="idref" href="D.Dot.lr.dot_lty.html#53036324c9eb2f6e31c056b7dfa11c32"><span class="id" title="notation">V</span></a><a class="idref" href="D.Dot.lr.dot_lty.html#53036324c9eb2f6e31c056b7dfa11c32"><span class="id" title="notation">⟦</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:127"><span class="id" title="variable">T</span></a><a class="idref" href="D.Dot.lr.dot_lty.html#53036324c9eb2f6e31c056b7dfa11c32"><span class="id" title="notation">⟧</span></a> <a class="idref" href="D.Dot.lr.dot_lty.html#53036324c9eb2f6e31c056b7dfa11c32"><span class="id" title="notation">V</span></a><a class="idref" href="D.Dot.lr.dot_lty.html#53036324c9eb2f6e31c056b7dfa11c32"><span class="id" title="notation">⟦</span></a><a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#T:127"><span class="id" title="variable">T</span></a><a class="idref" href="D.Dot.lr.dot_lty.html#53036324c9eb2f6e31c056b7dfa11c32"><span class="id" title="notation">⟧</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">have</span> := <a class="idref" href="D.prelude.html#a9a0b33c1f7aa55888d16704fbe19a94"><span class="id" title="notation">!!</span></a><a class="idref" href="D.Dot.lr.sem_unstamped_typing.html#267a5ee98e5fc9761e9a530570144e12"><span class="id" title="lemma">nclosed_syn_covering</span></a><a class="idref" href="D.Dot.lr.sem_unstamped_typing.html#267a5ee98e5fc9761e9a530570144e12"><span class="id" title="lemma">σ</span></a> <span class="id" title="var">HclT</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#sProj_Stp_TMem"><span class="id" title="lemma">sProj_Stp_TMem</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="D.Dot.semtyp_lemmas.tproj_lr.html#type_proj"><span class="id" title="section">type_proj</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
